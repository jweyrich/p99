<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P99: Implemented utilities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P99
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Implemented utilities </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>P99 implements many different features through macros and functions, too many to mention explicitly in such an overview. You will find a structured hierarchy of descriptions below the "Modules" tag and the documentation of individual items under "Files" -&gt; "Globals". Here we will introduce some main features:</p>
<ol type="1">
<li><a class="el" href="utilities.html#defaults">Default arguments to functions</a></li>
<li><a class="el" href="utilities.html#blocks">Scope-bound resource management with for-statements</a></li>
<li><a class="el" href="utilities.html#for">Multidimensional arrays and parallel loops</a></li>
<li><a class="el" href="utilities.html#condi">Preprocessor conditionals and loops</a></li>
<li><a class="el" href="utilities.html#alloc">Allocation and initialization facilities</a></li>
<li><a class="el" href="utilities.html#secC11">Emulating features of C11</a><ol type="a">
<li><a class="el" href="utilities.html#secGeneric">Type generic macros</a></li>
<li><a class="el" href="utilities.html#secAtomic">Atomic operations</a></li>
<li><a class="el" href="utilities.html#secThreads">Threads</a></li>
</ol>
</li>
</ol>
<h1><a class="anchor" id="defaults"></a>
Default arguments to functions</h1>
<p>In section <a class="el" href="conventions.html#temporaries">Use of temporary lvalues</a> we saw a way to provide default arguments to functions by overloading them with macros. The general declaration pattern here is as follows</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NAME(...) P99_CALL_DEFARG(NAME, N, __VA_ARGS__)</span></div>
</div><!-- fragment --><p>Where <code>NAME</code> becomes the name of a macro and where we also suppose that there is already a function of the same name <code>NAME</code>.</p>
<p>The default value for the ::hostname macro above was produced by a macro, namely <code>hostname_defarg_0</code>. The evaluation of the default value is done in the context of the call and not in the context of the declaration. For default arguments that are not constants but expressions that have to be evaluated this is a major difference to C++. There, default arguments are always evaluated in the context of the declaration.</p>
<p>The convention here is simple:</p><ul>
<li>when called, <a class="el" href="group__default__arguments_ga534b64dc507e3fc55edf96006e532eea.html#ga534b64dc507e3fc55edf96006e532eea" title="Define a replacement macro for functions that can provide default arguments to the underlying real fu...">P99_CALL_DEFARG</a> replaces each argument M (counting starts at 0) that is not provided by the tokens <div class="fragment"><div class="line">NAME ## _defarg_ ## M ()</div>
</div><!-- fragment --> that is a concatenation of <code>NAME</code> with the token <code><em>defarg</em></code> and the decimal number <code>M</code> </li>
<li>"not provided" here means either<ul>
<li>leaving an empty place in an argument list</li>
<li>giving fewer arguments than <code>N</code> </li>
</ul>
</li>
<li>to be valid C code this name must then either<ol type="1">
<li>itself be a macro that is then expanded</li>
<li>be a valid function call that can be interpreted by the compiler</li>
</ol>
</li>
</ul>
<p>As we have seen in the example (a) is computed in the context of the caller. This let us simply use a temporary (here a local <a class="el" href="c99.html#compound">compound literal</a>) that was thus valid in that context.</p>
<p>To obtain the same behavior as for C++, namely to provide a default argument that is evaluated at the place of declaration and not at the place of the call we have to use (b), a function call. This will be as efficient as a macro call if we use <a class="el" href="c99.html#inline">Inline functions</a> for that purpose.</p>
<p>To ease the programming of this functional approach, P99 provides some machinery. We need three things as in the following example: </p><div class="fragment"><div class="line"><a class="code" href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35">P99_PROTOTYPE</a>(rand48_t *, rand48_t_init, rand48_t*, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>);</div>
<div class="line"><span class="preprocessor">#define rand48_t_init(...) P99_CALL_DEFARG(rand48_t_init, 4, __VA_ARGS__)</span></div>
<div class="line"><a class="code" href="group__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1.html#ga118e9c06ec0818f31fd1ada56b30c7d1">P99_DECLARE_DEFARG</a>(rand48_t_init,</div>
<div class="line">                   ,</div>
<div class="line">                   useconds(),</div>
<div class="line">                   getpid(),</div>
<div class="line">                   atomic_fetch_add(&amp;rand48_counter)</div>
<div class="line">                   );</div>
</div><!-- fragment --><p>Namely</p><ul>
<li>a "prototype" of the underlying function, such that P99 knows the name of the function, the return type and the types of the arguments.</li>
<li>the macro definition as we have already seen</li>
<li>a declaration of the default arguments.</li>
</ul>
<p>Here in the example, a default argument is provided for positions 1 to 3 but not for position 0. All three defaults have the type <code>unsigned short</code>. The above code leads to the automatic generation of three <code>inline</code> functions that look something like:</p>
<div class="fragment"><div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line">rand48_t_init_defarg_1(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> useconds();</div>
<div class="line">}</div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line">rand48_t_init_defarg_2(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> getpid();</div>
<div class="line">}</div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line">rand48_t_init_defarg_3(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> atomic_fetch_add(&amp;rand48_counter);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This declaration and definition is placed in the context of the above declaration and not in the context of the caller. Thus the expression is evaluated in that context, and not in the context of the caller. In particular for the third function, this fixes the variable <code>rand48_counter</code> to the one that is visible at the point of declaration.</p>
<h1><a class="anchor" id="blocks"></a>
Scope-bound resource management with for-statements</h1>
<p>Resource management can be tedious in C. <em>E.g</em> to protect a critical block from simultaneous execution in a <a class="el" href="group__threads.html">threaded environment </a> you'd have to place a lock / unlock pair before and after that block:</p><div class="fragment"><div class="line"> mtx_t guard;</div>
<div class="line">mtx_init(&amp;guard);</div>
<div class="line"> </div>
<div class="line">mtx_lock(&amp;guard);</div>
<div class="line"><span class="comment">// critical block comes here</span></div>
<div class="line">mtx_unlock(&amp;guard);</div>
</div><!-- fragment --><p> This is error prone as locking calls must be provided for each critical block. If the block is longer than a few lines it becomes increasingly difficult to ensure the unlocking of the resource, since the lock / unlock calls are spread at the same level as other code.</p>
<p>Within C99 (and equally in C++, BTW) it is possible to extend the language in order to make this more easily visible and to guarantee that lock / unlock calls match. Below, we will give an example of a macro that will help us to write something like</p>
<div class="fragment"><div class="line"><a class="code" href="group__preprocessor__blocks_ga2eaeb00e774c19d9fe5a86f8e114e583.html#ga2eaeb00e774c19d9fe5a86f8e114e583">P99_PROTECTED_BLOCK</a>(mtx_lock(&amp;guard),</div>
<div class="line">                    mtx_unlock(&amp;guard)) {</div>
<div class="line">       <span class="comment">// critical block comes here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>To make this even more comfortable we have</p>
<div class="fragment"><div class="line"><a class="code" href="p99__threads_8h_abaddedaa2fac831c56ad4b580ffaad62.html#abaddedaa2fac831c56ad4b580ffaad62">P99_MUTUAL_EXCLUDE</a>(&amp;guard) {</div>
<div class="line">       <span class="comment">// critical block comes here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>There is an equivalent block protection that uses an ::atomic_flag as a spin lock. Such a spin lock uses only <a class="el" href="group__atomic.html">atomic operations </a> and can be much more efficient than protection through a ::mtx_t, <b>if</b> the code inside the critical section is really small and fast:</p>
<div class="fragment"><div class="line"><a class="code" href="p99__atomic__flag_8h_a670693cd54c78097a508f0e8e408352d.html#a670693cd54c78097a508f0e8e408352d">P99_SPIN_EXCLUDE</a>(&amp;cat) {</div>
<div class="line">       <span class="comment">// critical block comes here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>For cases where the ::atomic_flag variable would be specific to the block, you don't even have to define it yourself:</p>
<div class="fragment"><div class="line"><a class="code" href="group__atomic__types_gab5e27d36d2c05cfce2eb0d7f914bb0fa.html#gab5e27d36d2c05cfce2eb0d7f914bb0fa">P99_CRITICAL</a> {</div>
<div class="line">       <span class="comment">// critical block comes here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Generally there should be no run-time performance cost for using such a macro. Any decent compiler will detect that the dependent code is executed exactly once, and thus optimize out all the control that has to do with our specific implementation of theses blocks.</p>
<p>Other such block macros that can be implemented with such a technique are:</p><ul>
<li>pre- and post-conditions</li>
<li>ensuring that some dynamic initialization of a static variable is performed exactly once</li>
<li>code instrumentation</li>
</ul>
<p>An even more sophisticated tool for scope-bound resource management is provided by the macro <a class="el" href="group__preprocessor__blocks_ga3a751607e9ac837ee9c95efbaac5721f.html#ga3a751607e9ac837ee9c95efbaac5721f" title="Unwind execution from several levels of nesting inside a function.">P99_UNWIND_PROTECT</a> </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> toto(<span class="keywordtype">double</span> x) {</div>
<div class="line"> <a class="code" href="group__preprocessor__blocks_ga3a751607e9ac837ee9c95efbaac5721f.html#ga3a751607e9ac837ee9c95efbaac5721f">P99_UNWIND_PROTECT</a> {</div>
<div class="line">   <span class="comment">// do something</span></div>
<div class="line">   <span class="keywordflow">while</span> (cond0) {</div>
<div class="line">     <span class="keywordflow">for</span> (;cond1;) {</div>
<div class="line">        <span class="keywordflow">if</span> (cond2) <a class="code" href="group__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef.html#ga81698cb1303c3cb1551652098cbe72ef">P99_UNWIND</a>(-1);</div>
<div class="line">        <span class="comment">// preliminary return</span></div>
<div class="line">        <span class="keywordflow">if</span> (cond3) <a class="code" href="group__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b.html#ga437feef97b20e9cbdc3ab446826caf1b">P99_UNWIND_RETURN</a> 5.7777E-30;</div>
<div class="line">     }</div>
<div class="line">   }</div>
<div class="line">  <a class="code" href="group__preprocessor__blocks_ga924384d101d6a1e004ceb41dd7220d91.html#ga924384d101d6a1e004ceb41dd7220d91">P99_PROTECT</a> :</div>
<div class="line">   <span class="comment">// do some cleanup here</span></div>
<div class="line">   <span class="comment">// if everything went well ::p99_unwind_code has value 0 otherwise it</span></div>
<div class="line">   <span class="comment">// receives a value from P99_UNWIND</span></div>
<div class="line"> }</div>
<div class="line"> <span class="comment">// regular return</span></div>
<div class="line"> <span class="keywordflow">return</span> x * x;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In this code fragment the statement <a class="el" href="group__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef.html#ga81698cb1303c3cb1551652098cbe72ef" title="Preliminary resume from one or several levels of nested P99_UNWIND_PROTECT.">P99_UNWIND</a> will ensure that the two levels of loops are broken and that execution continues at the special label <a class="el" href="group__preprocessor__blocks_ga924384d101d6a1e004ceb41dd7220d91.html#ga924384d101d6a1e004ceb41dd7220d91" title="The pseudo label to which we jump when we unwind the stack with P99_UNWIND.">P99_PROTECT</a>.</p>
<p><a class="el" href="group__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b.html#ga437feef97b20e9cbdc3ab446826caf1b" title="Return from the enclosing function after unwinding all levels of nested P99_UNWIND_PROTECT.">P99_UNWIND_RETURN</a> goes one step further. As for <a class="el" href="group__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef.html#ga81698cb1303c3cb1551652098cbe72ef" title="Preliminary resume from one or several levels of nested P99_UNWIND_PROTECT.">P99_UNWIND</a>, it executes the clause after <a class="el" href="group__preprocessor__blocks_ga924384d101d6a1e004ceb41dd7220d91.html#ga924384d101d6a1e004ceb41dd7220d91" title="The pseudo label to which we jump when we unwind the stack with P99_UNWIND.">P99_PROTECT</a>, but when it reaches the end of the <a class="el" href="group__preprocessor__blocks_ga3a751607e9ac837ee9c95efbaac5721f.html#ga3a751607e9ac837ee9c95efbaac5721f" title="Unwind execution from several levels of nesting inside a function.">P99_UNWIND_PROTECT</a> scope it will return to the caller with a return value as specified after <a class="el" href="group__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b.html#ga437feef97b20e9cbdc3ab446826caf1b" title="Return from the enclosing function after unwinding all levels of nested P99_UNWIND_PROTECT.">P99_UNWIND_RETURN</a>, here the value <code>5.7777E-30</code>.</p>
<p>On certain platforms that implement enough of C11 we even now have try-catch clauses that are entirely implemented within C. <a class="el" href="group__try_ga9162d721fecf634c028ab873912c9cd0.html#ga9162d721fecf634c028ab873912c9cd0" title="Create a block that can catch exceptions.">P99_TRY</a> and <a class="el" href="group__try_ga115d4e3bf4faf1316f0f415a76b48c4e.html#ga115d4e3bf4faf1316f0f415a76b48c4e" title="Designate a block that is executed regardless of the exceptions that were encountered in the correspo...">P99_CATCH</a> can be used as follows </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> toto(<span class="keywordtype">double</span> x) {</div>
<div class="line"> <a class="code" href="group__try_ga9162d721fecf634c028ab873912c9cd0.html#ga9162d721fecf634c028ab873912c9cd0">P99_TRY</a> {</div>
<div class="line">   <span class="comment">// do something</span></div>
<div class="line">   <span class="keywordflow">while</span> (cond0) {</div>
<div class="line">     <span class="keywordflow">for</span> (;cond1;) {</div>
<div class="line">        <span class="keywordflow">if</span> (cond2) <a class="code" href="group__try_ga9362aa9665b1657c14414676c4e3b63c.html#ga9362aa9665b1657c14414676c4e3b63c">P99_THROW</a> -1;</div>
<div class="line">        <span class="comment">// preliminary return</span></div>
<div class="line">        <span class="keywordflow">if</span> (cond3) <a class="code" href="group__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b.html#ga437feef97b20e9cbdc3ab446826caf1b">P99_UNWIND_RETURN</a> 5.7777E-30;</div>
<div class="line">     }</div>
<div class="line">   }</div>
<div class="line"> } <a class="code" href="group__try_ga115d4e3bf4faf1316f0f415a76b48c4e.html#ga115d4e3bf4faf1316f0f415a76b48c4e">P99_CATCH</a>(<span class="keywordtype">int</span> code) {</div>
<div class="line">   <span class="comment">// do some cleanup here</span></div>
<div class="line">   <span class="comment">// if everything went well &quot;code&quot; has value 0 otherwise it</span></div>
<div class="line">   <span class="comment">// receives a value from ::P99_TRY</span></div>
<div class="line"> }</div>
<div class="line"> <span class="comment">// regular return</span></div>
<div class="line"> <span class="keywordflow">return</span> x * x;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The advantage of <a class="el" href="group__try_ga9162d721fecf634c028ab873912c9cd0.html#ga9162d721fecf634c028ab873912c9cd0" title="Create a block that can catch exceptions.">P99_TRY</a> over <a class="el" href="group__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef.html#ga81698cb1303c3cb1551652098cbe72ef" title="Preliminary resume from one or several levels of nested P99_UNWIND_PROTECT.">P99_UNWIND</a> is that P99_THROW will also work from other functions that called within the try-block.</p>
<h1><a class="anchor" id="for"></a>
Multidimensional arrays and parallel loops</h1>
<p>We provide some utilities to ease the programming of loop iterations in one or multiple dimensions. The simplest to use is <a class="el" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435" title="A fortran like do-loop with bounds that are fixed at the beginning.">P99_DO</a>, that closely resembles a <code>do</code> loop in Fortran. It fixes the bounds of the iteration once, before entering the iteration itself.</p>
<div class="fragment"><div class="line"><a class="code" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a>(<span class="keywordtype">size_t</span>, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, a, n, inc) {</div>
<div class="line">  A[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>] *= B[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>-1]</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="el" href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83" title="A multi-index for loop.">P99_FORALL</a> allows the generatation of nested for-loops over an arbitrary number of dimensions: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> <span class="keyword">const</span> D[3] = { 20, 17, 31 };</div>
<div class="line"><a class="code" href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83">P99_FORALL</a>(D, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, j, k) {</div>
<div class="line">     A[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j][k] *= B[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j][k];</div>
<div class="line">}</div>
</div><!-- fragment --><p>will iterate over all combinations of <code>i</code>, <code>j</code>, <code>k</code> in the bounds specified by <code>D</code>.</p>
<p><a class="el" href="group__preprocessor__blocks_gaaedc09a65ee738c4902e8c1bf8e415fb.html#gaaedc09a65ee738c4902e8c1bf8e415fb" title="Declare a for loop for which all iterations can be run independently and out of order.">P99_PARALLEL_FOR</a>, where available, will provide a parallelized version of a simple <code>for-loop</code>, and <a class="el" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7" title="as P99_DO but performs the iterations out of order">P99_PARALLEL_DO</a> and <a class="el" href="group__preprocessor__blocks_gadc2bef2dceeff9802aeb2ce5254876b0.html#gadc2bef2dceeff9802aeb2ce5254876b0" title="A multi-index for loop who&#39;s dependent statement or block may be executed out of order.">P99_PARALLEL_FORALL</a> implement nested parallel loops with otherwise the same semantics as for <a class="el" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435" title="A fortran like do-loop with bounds that are fixed at the beginning.">P99_DO</a> or <a class="el" href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83" title="A multi-index for loop.">P99_FORALL</a>, respectively.</p>
<h1><a class="anchor" id="condi"></a>
Preprocessor conditionals and loops</h1>
<p>P99 provides you with macro features that can become handy if you have to generate code repetition that might later be subject to changes. As examples suppose that you'd have to code something like</p>
<div class="fragment"><div class="line">tata = A[0]; tete = A[1]; titi = A[2]; toto = A[3];</div>
<div class="line"><span class="keyword">typedef</span> <span class="keywordtype">int</span> hui_0; <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> hui_1; <span class="keyword">typedef</span> <span class="keywordtype">double</span> hui_2;</div>
</div><!-- fragment --><p>If, over time, there are many additions and removals to these lists, maintaining such code will not really be a pleasure. In P99 you may write equivalent statements and declarations just as</p>
<div class="fragment"><div class="line"><a class="code" href="group__statement__lists_ga8b50ee12a4f501f1701cbeebf4c5e698.html#ga8b50ee12a4f501f1701cbeebf4c5e698">P99_VASSIGNS</a>(A, tata, tete, titi, toto);</div>
<div class="line"><a class="code" href="group__statement__lists_gad8125698cfe4bfa3d392236c65493ea3.html#gad8125698cfe4bfa3d392236c65493ea3">P99_TYPEDEFS</a>(hui, <span class="keywordtype">int</span>, <span class="keywordtype">unsigned</span>, <span class="keywordtype">double</span>);</div>
</div><!-- fragment --><p>There are a handful of such predefined macros that you may look up under <a class="el" href="group__statement__lists.html">Produce C99 statements or expression lists</a>. Under the hood they all use a more general macro that you may yourself use to define your own macros: <a class="el" href="group__preprocessor__for_gae3eb0e3a5216300874ed6cb9abc170ce.html#gae3eb0e3a5216300874ed6cb9abc170ce" title="A preprocessor pseudo iterator.">P99_FOR</a>. The use of this will be described in more detail under <a class="el" href="programming.html">Macro programming with P99</a>.</p>
<p>The predefined macros from above are also able to avoid the nasty special case that the variadic part of the argument list is empty. Something like</p>
<div class="fragment"><div class="line"><a class="code" href="group__statement__lists_ga8b50ee12a4f501f1701cbeebf4c5e698.html#ga8b50ee12a4f501f1701cbeebf4c5e698">P99_VASSIGNS</a>(A);</div>
<div class="line"><a class="code" href="group__statement__lists_gad8125698cfe4bfa3d392236c65493ea3.html#gad8125698cfe4bfa3d392236c65493ea3">P99_TYPEDEFS</a>(hui);</div>
</div><!-- fragment --><p>would at least cause a warning with conforming preprocessors if the macros were implemented directly with something like</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define P99_VASSIGNS(NAME, ...) do_something_here</span></div>
<div class="line"><span class="preprocessor">#define P99_TYPEDEFS(NAME, ...) do_something_else_here</span></div>
</div><!-- fragment --><p>since the variable length part should not be empty, according to the standard. With P99 you don't have these sort of problems, the above should just result in empty statements or declarations, that are even capable of swallowing the then superfluous semicolon at the end.</p>
<p>P99 avoids this by testing for the length of the argument list as a whole with <a class="el" href="group__basic__list__operations_ga36a4ab24ad412a94da4c5aad433d6cd3.html#ga36a4ab24ad412a94da4c5aad433d6cd3" title="Return the length of the variable length argument list, where an empty argument list is considered to...">P99_NARG</a> and by using a macro conditional controlled by that length. Such conditionals like <a class="el" href="group__preprocessor__conditionals_ga4b29db6a9cbbcd351366843deb3bb674.html#ga4b29db6a9cbbcd351366843deb3bb674">P99_IF_EMPTY</a> ensure that the preprocessor decides which of two different code variants the compiler will see. The fragment</p>
<div class="fragment"><div class="line"><a class="code" href="group__preprocessor__conditionals_ga4b29db6a9cbbcd351366843deb3bb674.html#ga4b29db6a9cbbcd351366843deb3bb674">P99_IF_EMPTY</a>(BLA)(special_version)(general_version)</div>
</div><!-- fragment --><p>will expand to either <code>special_version</code> or <code>general_version</code> according to <code>BLA</code>. If it expands to an empty token, the first variant is produced, if there is at least one non-empty token the second version results.</p>
<p>P99 also implements logical and arithmetic operations in the preprocessor. Logical operations just evaluate to the tokens <code>0</code> or <code>1</code>. Arithmetic is restricted to small decimal numbers, less than <a class="el" href="p99__generated_8h_a1d1df64eabc7e929e4d4c37f21f98557.html#a1d1df64eabc7e929e4d4c37f21f98557" title="The maximal number of arguments the P99 macros can handle.">P99_MAX_NUMBER</a>. Some examples</p>
<div class="fragment"><div class="line"><a class="code" href="group__preprocessor__logic_ga316ec102bd9728181e04c2a26ec0603e.html#ga316ec102bd9728181e04c2a26ec0603e">P99_IS_EQ</a>(<span class="keywordtype">int</span>, <span class="keywordtype">double</span>)    ==&gt; 0</div>
<div class="line"><a class="code" href="group__preprocessor__logic_ga316ec102bd9728181e04c2a26ec0603e.html#ga316ec102bd9728181e04c2a26ec0603e">P99_IS_EQ</a>(<span class="keyword">static</span>, <span class="keyword">static</span>) ==&gt; 1</div>
<div class="line"><a class="code" href="group__preprocessor__arithmetic_gab848f484b3120f781e27fda553e6a808.html#gab848f484b3120f781e27fda553e6a808">P99_ADD</a>(4, 5)         ==&gt; 9</div>
</div><!-- fragment --><p>See <a class="el" href="group__preprocessor__operators.html">Preprocessor operations</a> for more about that.</p>
<h1><a class="anchor" id="alloc"></a>
Allocation and initialization facilities</h1>
<p>Consistent initialization of variables is an important issue in C. P99 provides some tools to help with that, most importantly a macro <a class="el" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412" title="Allocate an element of type T as given by the first argument and initialize it with the remaining arg...">P99_NEW</a>. Therefore we have to relay on some assumptions that are specified in <a class="el" href="conventions.html#variableInit">Variable initialization</a>, in particular that there is an &lsquo;init&rsquo; function for each type that we want to use with <a class="el" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412" title="Allocate an element of type T as given by the first argument and initialize it with the remaining arg...">P99_NEW</a>.</p>
<p>For the example type of a circular list element</p>
<div class="fragment"><div class="line"><span class="comment">// Forward declare struct elem and elem</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>elem elem;</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">struct elem { elem* pred; elem* succ; };</div>
</div><!-- fragment --><p>we might want to ensure that the fields <code>pred</code> and <code>succ</code> are always properly initialized. An &lsquo;init&rsquo; function could be as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#define ELEM_INITIALIZER(HERE, PRED, SUCC) {</span></div>
<div class="line"> .pred = (PRED) ? (PRED) : (HERE),</div>
<div class="line"> .succ = (SUCC) ? (SUCC) ; (HERE),</div>
<div class="line">}</div>
</div><!-- fragment --><p>A static initialization of a 4-element list in file scope can then be done as </p><div class="fragment"><div class="line"><span class="keyword">extern</span> elem * head;</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line"><span class="keyword">static</span> elem L0;</div>
<div class="line"><span class="keyword">static</span> elem L1;</div>
<div class="line"><span class="keyword">static</span> elem L2;</div>
<div class="line"><span class="keyword">static</span> elem L3;</div>
<div class="line"><span class="keyword">static</span> elem L0 = ELEM_INITIALIZER(&amp;L0, &amp;L1, &amp;L3);</div>
<div class="line"><span class="keyword">static</span> elem L1 = ELEM_INITIALIZER(&amp;L1, &amp;L0, &amp;L2);</div>
<div class="line"><span class="keyword">static</span> elem L2 = ELEM_INITIALIZER(&amp;L2, &amp;L1, &amp;L3);</div>
<div class="line"><span class="keyword">static</span> elem L3 = ELEM_INITIALIZER(&amp;L3, &amp;L2, &amp;L0);</div>
<div class="line">head = &amp;L0;</div>
</div><!-- fragment --><p>Dynamic initialization of a 4-element list on the stack in function scope </p><div class="fragment"><div class="line">elem L[4] = {</div>
<div class="line">  [0] = ELEM_INITIALIZER(&amp;L[0], &amp;L[1], &amp;L[3]),</div>
<div class="line">  [1] = ELEM_INITIALIZER(&amp;L[1], &amp;L[0], &amp;L[2]),</div>
<div class="line">  [2] = ELEM_INITIALIZER(&amp;L[2], &amp;L[1], &amp;L[3]),</div>
<div class="line">  [3] = ELEM_INITIALIZER(&amp;L[3], &amp;L[2], &amp;L[0]),</div>
<div class="line">};</div>
</div><!-- fragment --><p>For dynamic initialization we would then define something like this: </p><div class="fragment"><div class="line">elem * elem_init(elem* here, elem* there) {</div>
<div class="line">  <span class="keywordflow">if</span> (here) {</div>
<div class="line">    <span class="keywordflow">if</span> (there) {</div>
<div class="line">       here-&gt;pred = there;</div>
<div class="line">       here-&gt;succ = there-&gt;succ;</div>
<div class="line">       there-&gt;succ = here;</div>
<div class="line">       here-&gt;succ-&gt;pred = here;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">       here-&gt;pred = here;</div>
<div class="line">       here-&gt;succ = here;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> here;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Initializations of this type of heap variables in function scope can now simply look like this </p><div class="fragment"><div class="line">elem * a = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__integers_gac7a22b7e6ddf5b670823a9831ae27911.html#gac7a22b7e6ddf5b670823a9831ae27911">P99_0</a>(elem*));</div>
<div class="line">elem * b = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, a);</div>
<div class="line">elem * c = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, b);</div>
</div><!-- fragment --><p> or </p><div class="fragment"><div class="line">elem * head = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__integers_gac7a22b7e6ddf5b670823a9831ae27911.html#gac7a22b7e6ddf5b670823a9831ae27911">P99_0</a>(elem*))));</div>
</div><!-- fragment --><p>These define cyclic lists of 3 elements, well initialized and ready to go.</p>
<p>In fact, the <a class="el" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412" title="Allocate an element of type T as given by the first argument and initialize it with the remaining arg...">P99_NEW</a> macro takes a list of arguments that may be arbitrarily<a class="el" href="footnotes.html"><sup> 3</sup></a> long. It just needs the first, which must be the type of the object that is to be created. The others are then passed as supplementary arguments to the &lsquo;init&rsquo; function, here the parameter <code>there</code>.</p>
<p>If the &lsquo;init&rsquo; function accepts default arguments to some parameters, so will <a class="el" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412" title="Allocate an element of type T as given by the first argument and initialize it with the remaining arg...">P99_NEW</a>. With <a class="el" href="group__default__arguments.html">Default arguments and types for functions</a>, calls to <a class="el" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412" title="Allocate an element of type T as given by the first argument and initialize it with the remaining arg...">P99_NEW</a> may then omit the second argument:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define elem_init(...) P99_CALL_DEFARG(elem_init, 2, __VA_ARGS__)</span></div>
<div class="line"><span class="preprocessor">#define elem_init_defarg_1() P99_0(elem*)</span></div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">elem * a = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem);</div>
<div class="line">elem * head = <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem, <a class="code" href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a>(elem)));</div>
</div><!-- fragment --><dl class="footnotes"><dt><b><a class="el" href="footnotes.html#_footnotes000002">Footnotes:</a></b></dt><dd><sup> 3</sup> The number of arguments might be restricted by your compiler implementation. Also most of the P99 macros are limited to <a class="el" href="p99__generated_8h_a1d1df64eabc7e929e4d4c37f21f98557.html#a1d1df64eabc7e929e4d4c37f21f98557" title="The maximal number of arguments the P99 macros can handle.">P99_MAX_NUMBER</a>.</dd></dl>
<h1><a class="anchor" id="secC11"></a>
Emulating features of C11</h1>
<p>The new C standard C11 (published in December 2011) introduces some new features that are already present in many compilers or OS, but sometimes with different syntax or interfaces. We provide interfaces to some of them with the intention that once compilers that implement C11 come out these interfaces can directly relate to the C11 feature.</p>
<p>With these emulated interfaces you can already program almost as if you had a native C11 compiler (which doesn't yet exist) and take advantage of the improvements that C11 makes to the language, without giving up on portability in the real world of today's compilers.</p>
<h2><a class="anchor" id="secGeneric"></a>
Type generic macros</h2>
<p>C11 provides a new feature to "overload" macros and more generally the result of any type of expression, <code>_Generic</code>. It allows to write template-like expressions with the macro preprocessor. The idea is to generate <em>type generic mathematical function</em> that already had been present in C99:</p>
<p>If you include the "tgmath.h" header you have a macro <code>sin</code> that implements calls to the family of sine functions, e.g</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> complex z0 = sin(1.0);        <span class="comment">// invokes the @em function @c sin</span></div>
<div class="line"><span class="keywordtype">double</span> complex z1 = sin(2.0 + 3*I);  <span class="comment">// invokes the function @c csin</span></div>
</div><!-- fragment --><p>At compile, these type generic macros decide from the <em>type</em> of the argument which function call to emit.</p>
<p>The new concept of <code>_Generic</code> expressions generalizes this concept. From the usually public domain compilers at the time of this writing (Apr 2012) only <code>clang</code> implements this feature already. On the other hand <code>gcc</code> has extension that can be used to emulate it, and such an emulation is provided through <a class="el" href="group__generic_gadfd5094a355923e6ad86356422fbb972.html#gadfd5094a355923e6ad86356422fbb972" title="Type generic expression in anticipation of C11 _Generic.">P99_GENERIC</a>.</p>
<h2><a class="anchor" id="secAtomic"></a>
Atomic operations</h2>
<p>Atomic operations are an important contribution of the new standard; these operations are implemented on all commodity CPU nowadays but a direct interface in a higher programming language was missing.</p>
<p>These operations give guarantees on the coherence of data accesses and other primitive operations, even in presence of <em>races</em>. Such races may occur between different threads (see below) of the same application or when a program execution is interrupted, e.g for a signal handler or a <code>longjmp</code> call. Since most instructions on modern CPU are composed of several micro-instructions, in such a context an instruction may only succeed partially and a data may end up in a intermediate state.</p>
<p>In this example</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> _Atomic(<span class="keywordtype">size_t</span>) n = 0;</div>
<div class="line">atomic_fetch_and_add(&amp;n, 1);</div>
<div class="line"><span class="comment">// do something in here</span></div>
<div class="line">atomic_fetch_and_sub(&amp;n, 1);</div>
</div><!-- fragment --><p>the variable <code>n</code> is always in a clean state: either the addition of <code>has</code> taken place or it has not. Multiple threads can execute this code without locking a mutex or so, the value of <code>n</code> will always be well defined.</p>
<p>One of the interesting concepts that come with C11 is ::atomic_flag, that is a simple interface that can implement spinlocks quite efficiently.</p>
<h2><a class="anchor" id="secThreads"></a>
Threads</h2>
<p>Atomic operations have their major advantage in the presence of threads, that is multiple entities that compute concurrently inside the same application and using a common address space. C11 provides an optional interface for threads and the principal data structures that are needed for them (::thrd_mutex_t and ::thrd_cond_t). This thread interface is a bit simpler than POSIX threads, but implements the main features.</p>
<p>P99 provides a shallow wrapper on top of POSIX threads that provides all the interfaces that are required by C11. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="agroup__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b_html_ga437feef97b20e9cbdc3ab446826caf1b"><div class="ttname"><a href="group__preprocessor__blocks_ga437feef97b20e9cbdc3ab446826caf1b.html#ga437feef97b20e9cbdc3ab446826caf1b">P99_UNWIND_RETURN</a></div><div class="ttdeci">#define P99_UNWIND_RETURN</div><div class="ttdoc">Return from the enclosing function after unwinding all levels of nested P99_UNWIND_PROTECT.</div><div class="ttdef"><b>Definition:</b> <a href="p99__block_8h_source.html#l00691">p99_block.h:691</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga924384d101d6a1e004ceb41dd7220d91_html_ga924384d101d6a1e004ceb41dd7220d91"><div class="ttname"><a href="group__preprocessor__blocks_ga924384d101d6a1e004ceb41dd7220d91.html#ga924384d101d6a1e004ceb41dd7220d91">P99_PROTECT</a></div><div class="ttdeci">#define P99_PROTECT</div><div class="ttdoc">The pseudo label to which we jump when we unwind the stack with P99_UNWIND.</div><div class="ttdef"><b>Definition:</b> <a href="p99__block_8h_source.html#l00719">p99_block.h:719</a></div></div>
<div class="ttc" id="agroup__atomic__types_gab5e27d36d2c05cfce2eb0d7f914bb0fa_html_gab5e27d36d2c05cfce2eb0d7f914bb0fa"><div class="ttname"><a href="group__atomic__types_gab5e27d36d2c05cfce2eb0d7f914bb0fa.html#gab5e27d36d2c05cfce2eb0d7f914bb0fa">P99_CRITICAL</a></div><div class="ttdeci">#define P99_CRITICAL</div><div class="ttdoc">Protect the following block or statement as a critical section of the program.</div><div class="ttdef"><b>Definition:</b> <a href="p99__atomic_8h_source.html#l01430">p99_atomic.h:1430</a></div></div>
<div class="ttc" id="agroup__try_ga9162d721fecf634c028ab873912c9cd0_html_ga9162d721fecf634c028ab873912c9cd0"><div class="ttname"><a href="group__try_ga9162d721fecf634c028ab873912c9cd0.html#ga9162d721fecf634c028ab873912c9cd0">P99_TRY</a></div><div class="ttdeci">#define P99_TRY</div><div class="ttdoc">Create a block that can catch exceptions.</div><div class="ttdef"><b>Definition:</b> <a href="p99__try_8h_source.html#l00585">p99_try.h:585</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83_html_gaa617d014eeeaa561e1ff063b2014df83"><div class="ttname"><a href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83">P99_FORALL</a></div><div class="ttdeci">#define P99_FORALL(NAME,...)</div><div class="ttdoc">A multi-index for loop.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00956">p99_for.h:956</a></div></div>
<div class="ttc" id="agroup__try_ga9362aa9665b1657c14414676c4e3b63c_html_ga9362aa9665b1657c14414676c4e3b63c"><div class="ttname"><a href="group__try_ga9362aa9665b1657c14414676c4e3b63c.html#ga9362aa9665b1657c14414676c4e3b63c">P99_THROW</a></div><div class="ttdeci">#define P99_THROW(X)</div><div class="ttdoc">Stop execution at the current point and signal an exception of value X to the next P99_TRY clause on ...</div><div class="ttdef"><b>Definition:</b> <a href="p99__try_8h_source.html#l00128">p99_try.h:128</a></div></div>
<div class="ttc" id="agroup__preprocessor__allocation_gac774164507f258a329f5caa23e03a412_html_gac774164507f258a329f5caa23e03a412"><div class="ttname"><a href="group__preprocessor__allocation_gac774164507f258a329f5caa23e03a412.html#gac774164507f258a329f5caa23e03a412">P99_NEW</a></div><div class="ttdeci">#define P99_NEW(...)</div><div class="ttdoc">Allocate an element of type T as given by the first argument and initialize it with the remaining arg...</div><div class="ttdef"><b>Definition:</b> <a href="p99__new_8h_source.html#l00314">p99_new.h:314</a></div></div>
<div class="ttc" id="agroup__integers_gac7a22b7e6ddf5b670823a9831ae27911_html_gac7a22b7e6ddf5b670823a9831ae27911"><div class="ttname"><a href="group__integers_gac7a22b7e6ddf5b670823a9831ae27911.html#gac7a22b7e6ddf5b670823a9831ae27911">P99_0</a></div><div class="ttdeci">#define P99_0(T)</div><div class="ttdoc">Cast the int value 0 to type T.</div><div class="ttdef"><b>Definition:</b> <a href="p99__int_8h_source.html#l00349">p99_int.h:349</a></div></div>
<div class="ttc" id="agroup__preprocessor__arithmetic_gab848f484b3120f781e27fda553e6a808_html_gab848f484b3120f781e27fda553e6a808"><div class="ttname"><a href="group__preprocessor__arithmetic_gab848f484b3120f781e27fda553e6a808.html#gab848f484b3120f781e27fda553e6a808">P99_ADD</a></div><div class="ttdeci">#define P99_ADD(_0, _1)</div><div class="ttdoc">add two decimal numbers</div><div class="ttdef"><b>Definition:</b> <a href="p99__logical_8h_source.html#l00217">p99_logical.h:217</a></div></div>
<div class="ttc" id="ap99__atomic__flag_8h_a670693cd54c78097a508f0e8e408352d_html_a670693cd54c78097a508f0e8e408352d"><div class="ttname"><a href="p99__atomic__flag_8h_a670693cd54c78097a508f0e8e408352d.html#a670693cd54c78097a508f0e8e408352d">P99_SPIN_EXCLUDE</a></div><div class="ttdeci">#define P99_SPIN_EXCLUDE(FLAGP)</div><div class="ttdoc">Protect the following block or statement as a critical section of the program by using FLAGP as a spi...</div><div class="ttdef"><b>Definition:</b> <a href="p99__atomic__flag_8h_source.html#l00090">p99_atomic_flag.h:90</a></div></div>
<div class="ttc" id="agroup__preprocessor__logic_ga316ec102bd9728181e04c2a26ec0603e_html_ga316ec102bd9728181e04c2a26ec0603e"><div class="ttname"><a href="group__preprocessor__logic_ga316ec102bd9728181e04c2a26ec0603e.html#ga316ec102bd9728181e04c2a26ec0603e">P99_IS_EQ</a></div><div class="ttdeci">#define P99_IS_EQ(_0, _1)</div><div class="ttdoc">Determine if the two tokens _0 and _1 are equal.</div><div class="ttdef"><b>Definition:</b> <a href="p99__logical_8h_source.html#l00054">p99_logical.h:54</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef_html_ga81698cb1303c3cb1551652098cbe72ef"><div class="ttname"><a href="group__preprocessor__blocks_ga81698cb1303c3cb1551652098cbe72ef.html#ga81698cb1303c3cb1551652098cbe72ef">P99_UNWIND</a></div><div class="ttdeci">#define P99_UNWIND(X)</div><div class="ttdoc">Preliminary resume from one or several levels of nested P99_UNWIND_PROTECT.</div><div class="ttdef"><b>Definition:</b> <a href="p99__block_8h_source.html#l00664">p99_block.h:664</a></div></div>
<div class="ttc" id="agroup__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35_html_gad246cad7a697b694ecf0bbda6e0cbb35"><div class="ttname"><a href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35">P99_PROTOTYPE</a></div><div class="ttdeci">#define P99_PROTOTYPE(...)</div><div class="ttdoc">Define the prototype of function NAME.</div><div class="ttdef"><b>Definition:</b> <a href="p99__defarg_8h_source.html#l00197">p99_defarg.h:197</a></div></div>
<div class="ttc" id="agroup__statement__lists_gad8125698cfe4bfa3d392236c65493ea3_html_gad8125698cfe4bfa3d392236c65493ea3"><div class="ttname"><a href="group__statement__lists_gad8125698cfe4bfa3d392236c65493ea3.html#gad8125698cfe4bfa3d392236c65493ea3">P99_TYPEDEFS</a></div><div class="ttdeci">#define P99_TYPEDEFS(NAME,...)</div><div class="ttdoc">Take each argument on the list and transform it into a typedef of name NAME_0, NAME_1,...</div><div class="ttdef"><b>Definition:</b> <a href="p99__map_8h_source.html#l00227">p99_map.h:227</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga3a751607e9ac837ee9c95efbaac5721f_html_ga3a751607e9ac837ee9c95efbaac5721f"><div class="ttname"><a href="group__preprocessor__blocks_ga3a751607e9ac837ee9c95efbaac5721f.html#ga3a751607e9ac837ee9c95efbaac5721f">P99_UNWIND_PROTECT</a></div><div class="ttdeci">#define P99_UNWIND_PROTECT</div><div class="ttdoc">Unwind execution from several levels of nesting inside a function.</div><div class="ttdef"><b>Definition:</b> <a href="p99__block_8h_source.html#l00612">p99_block.h:612</a></div></div>
<div class="ttc" id="agroup__statement__lists_ga8b50ee12a4f501f1701cbeebf4c5e698_html_ga8b50ee12a4f501f1701cbeebf4c5e698"><div class="ttname"><a href="group__statement__lists_ga8b50ee12a4f501f1701cbeebf4c5e698.html#ga8b50ee12a4f501f1701cbeebf4c5e698">P99_VASSIGNS</a></div><div class="ttdeci">#define P99_VASSIGNS(NAME,...)</div><div class="ttdoc">Vector-assign to a list.</div><div class="ttdef"><b>Definition:</b> <a href="p99__map_8h_source.html#l00210">p99_map.h:210</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435_html_ga41d6ee07b6d45361720a01e1064bd435"><div class="ttname"><a href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a></div><div class="ttdeci">#define P99_DO(TYPE, VAR, LOW, LEN, INCR)</div><div class="ttdoc">A fortran like do-loop with bounds that are fixed at the beginning.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00882">p99_for.h:882</a></div></div>
<div class="ttc" id="agroup__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1_html_ga118e9c06ec0818f31fd1ada56b30c7d1"><div class="ttname"><a href="group__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1.html#ga118e9c06ec0818f31fd1ada56b30c7d1">P99_DECLARE_DEFARG</a></div><div class="ttdeci">#define P99_DECLARE_DEFARG(NAME,...)</div><div class="ttdoc">Provide default arguments for macro NAME.</div><div class="ttdef"><b>Definition:</b> <a href="p99__defarg_8h_source.html#l00289">p99_defarg.h:289</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga2eaeb00e774c19d9fe5a86f8e114e583_html_ga2eaeb00e774c19d9fe5a86f8e114e583"><div class="ttname"><a href="group__preprocessor__blocks_ga2eaeb00e774c19d9fe5a86f8e114e583.html#ga2eaeb00e774c19d9fe5a86f8e114e583">P99_PROTECTED_BLOCK</a></div><div class="ttdeci">#define P99_PROTECTED_BLOCK(BEFORE, AFTER)</div><div class="ttdoc">A meta-macro to protect a dependent block or statement by the statements BEFORE that is executed befo...</div><div class="ttdef"><b>Definition:</b> <a href="p99__block_8h_source.html#l00217">p99_block.h:217</a></div></div>
<div class="ttc" id="ap99__threads_8h_abaddedaa2fac831c56ad4b580ffaad62_html_abaddedaa2fac831c56ad4b580ffaad62"><div class="ttname"><a href="p99__threads_8h_abaddedaa2fac831c56ad4b580ffaad62.html#abaddedaa2fac831c56ad4b580ffaad62">P99_MUTUAL_EXCLUDE</a></div><div class="ttdeci">#define P99_MUTUAL_EXCLUDE(MUT)</div><div class="ttdoc">Protect the following block or statement with mtx_t MUT.</div><div class="ttdef"><b>Definition:</b> <a href="p99__threads_8h_source.html#l00308">p99_threads.h:308</a></div></div>
<div class="ttc" id="ap99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda_html_a57a586489a0c58f01ad0e9d31e7c2eda"><div class="ttname"><a href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a></div><div class="ttdeci">P00_CLAUSE2 i(_Pragma(&quot;weak  p00_getopt_comp&quot;))(_Pragma(&quot;weak p00_getopt_comp </div></div>
<div class="ttc" id="agroup__preprocessor__conditionals_ga4b29db6a9cbbcd351366843deb3bb674_html_ga4b29db6a9cbbcd351366843deb3bb674"><div class="ttname"><a href="group__preprocessor__conditionals_ga4b29db6a9cbbcd351366843deb3bb674.html#ga4b29db6a9cbbcd351366843deb3bb674">P99_IF_EMPTY</a></div><div class="ttdeci">#define P99_IF_EMPTY(...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__if_8h_source.html#l00153">p99_if.h:153</a></div></div>
<div class="ttc" id="agroup__try_ga115d4e3bf4faf1316f0f415a76b48c4e_html_ga115d4e3bf4faf1316f0f415a76b48c4e"><div class="ttname"><a href="group__try_ga115d4e3bf4faf1316f0f415a76b48c4e.html#ga115d4e3bf4faf1316f0f415a76b48c4e">P99_CATCH</a></div><div class="ttdeci">#define P99_CATCH(...)</div><div class="ttdoc">Designate a block that is executed regardless of the exceptions that were encountered in the correspo...</div><div class="ttdef"><b>Definition:</b> <a href="p99__try_8h_source.html#l00676">p99_try.h:676</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
