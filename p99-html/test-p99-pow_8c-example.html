<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P99: test-p99-pow.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P99
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">test-p99-pow.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>an example for computations with large matricesThis uses the VLA array passing macros, <a class="el" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435" title="A fortran like do-loop with bounds that are fixed at the beginning.">P99_DO</a> and <a class="el" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7" title="as P99_DO but performs the iterations out of order">P99_PARALLEL_DO</a></p>
<div class="fragment"><div class="line"><span class="comment">/* This may look like nonsense, but it really is -*- mode: C -*-              */</span></div>
<div class="line"><span class="comment">/*                                                                            */</span></div>
<div class="line"><span class="comment">/* Except for parts copied from previous work and as explicitly stated below, */</span></div>
<div class="line"><span class="comment">/* the author and copyright holder for this work is                           */</span></div>
<div class="line"><span class="comment">/* all rights reserved,  2011-2012 Jens Gustedt, INRIA, France                */</span></div>
<div class="line"><span class="comment">/*                                                                            */</span></div>
<div class="line"><span class="comment">/* This file is free software; it is part of the P99 project.                 */</span></div>
<div class="line"><span class="comment">/* You can redistribute it and/or modify it under the terms of the QPL as     */</span></div>
<div class="line"><span class="comment">/* given in the file LICENSE. It is distributed without any warranty;         */</span></div>
<div class="line"><span class="comment">/* without even the implied warranty of merchantability or fitness for a      */</span></div>
<div class="line"><span class="comment">/* particular purpose.                                                        */</span></div>
<div class="line"><span class="comment">/*                                                                            */</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__checkargs_8h.html">p99_checkargs.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__for_8h.html">p99_for.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__map_8h.html">p99_map.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__new_8h.html">p99_new.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__c99__default_8h.html">p99_c99_default.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="p99__atomic_8h.html">p99_atomic.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _OPENMP</span></div>
<div class="line"><span class="preprocessor"># include &lt;omp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="comment">/* If this is not compiled with OpenMP support, just ignore the two</span></div>
<div class="line"><span class="comment">   functions that we borrowed from them. */</span></div>
<div class="line"><span class="preprocessor">#define omp_get_wtime(...) 0.0;</span></div>
<div class="line"><span class="preprocessor">#define omp_set_num_threads(...) P99_NOP</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Print a 2D double array, the (more or less) hidden function. */</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">printFunc(<a name="a0"></a><a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2)) {</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> na0 = <a name="a1"></a><a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0);</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> na1 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 1);</div>
<div class="line">  <a name="a2"></a><a class="code" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a>(<span class="keywordtype">size_t</span>, <a name="a3"></a><a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, 0, na0) {</div>
<div class="line">    <a class="code" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a>(<span class="keywordtype">size_t</span>, j, 0, na1) {</div>
<div class="line">      printf(<span class="stringliteral">&quot;%g\t&quot;</span>, (*A)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j]);</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">  fflush(0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a name="a4"></a><a class="code" href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a>(printFunc, <span class="keywordtype">void</span>, (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2)), (<a name="a5"></a><a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 2)), (), (2));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Print a 2D array, the user interface */</span></div>
<div class="line"><span class="preprocessor">#define print(ARR) P99_CA_CALL(printFunc, (), (2), P99_ACALL(ARR, 2, double const))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Check a 2D double array if it is all 0.0, the (more or less) hidden function. */</span></div>
<div class="line"><span class="comment">/* The array is called C. The lengths are not accessible through a</span></div>
<div class="line"><span class="comment">   name, but only trough the ::P99_ALEN macro. */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">bool</span></div>
<div class="line">checkZeroFunc(<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, C, 2)) {</div>
<div class="line">  atomic_flag ret = ATOMIC_FLAG_INIT;</div>
<div class="line">  <a name="a6"></a><a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, 0, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*C, 0)) {</div>
<div class="line">    <a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, j, 0, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*C, 1)) {</div>
<div class="line">      <span class="keywordflow">if</span> ((*C)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j] != 0.0) atomic_flag_test_and_set_explicit(&amp;ret, memory_order_release);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> !atomic_flag_test_and_set_explicit(&amp;ret, memory_order_acquire);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a>(checkZeroFunc, <span class="keywordtype">bool</span>, (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, C, 2)), (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(C, 2)), (), (2));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The user interface. It receives just one argument the pointer to</span></div>
<div class="line"><span class="comment">   the matrix. */</span></div>
<div class="line"><span class="preprocessor">#define checkZero(VC) P99_CA_CALL(checkZeroFunc, (), (2), P99_ACALL(VC, 2, double const))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Compute the dot-product of two double vectors, the (more or less) hidden function. */</span></div>
<div class="line"><span class="comment">/* The two vectors are called A and B. Their length are not accessible</span></div>
<div class="line"><span class="comment">   through a name, but only trough the ::P99_ALEN macro. */</span></div>
<div class="line"><span class="comment">/* The parameter ret serves as an accumulator. */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">double</span></div>
<div class="line">dotproductFunc(<span class="keywordtype">double</span> ret,</div>
<div class="line">               <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 1),</div>
<div class="line">               <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 1)) {</div>
<div class="line">  assert(<a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(A, 1) == <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(B, 1));</div>
<div class="line">  <a class="code" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a>(<span class="keywordtype">size_t</span>, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, 0, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(A, 1))</div>
<div class="line">  ret += (*A)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>] * (*B)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>];</div>
<div class="line">  return ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a>(dotproductFunc,</div>
<div class="line">                    <span class="keywordtype">double</span>,</div>
<div class="line">                    (<span class="keywordtype">double</span> ret, <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> const, A, 1), <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> const, B, 1)),</div>
<div class="line">                    (ret, <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 1), <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 1)), (), (2, 4));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* A helper macro that puts the accumulator argument in front. */</span></div>
<div class="line"><span class="preprocessor">#define dotproduct1(VA, VB, CAR)                                                                             \</span></div>
<div class="line"><span class="preprocessor">P99_CA_CALL(dotproductFunc, (), (2, 4), CAR, P99_ACALL(VA, 1, double const), P99_ACALL(VB, 1, double const))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* A helper macro that translates a va_arg list into the five</span></div>
<div class="line"><span class="comment">   arguments for dotproductFunc. */</span></div>
<div class="line"><span class="preprocessor">#define dotproduct0(...) dotproduct1(__VA_ARGS__)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The user interface. It receives three arguments of which the last</span></div>
<div class="line"><span class="comment">   is optional. */</span></div>
<div class="line"><span class="preprocessor">#define dotproduct(...) dotproduct0(P99_CALL_DEFARG_LIST(dotproduct, 3, __VA_ARGS__))</span></div>
<div class="line"><span class="comment">/* Define the optional argument the accumulator to default to 0.0 */</span></div>
<div class="line"><span class="preprocessor">#define dotproduct_defarg_2() 0.0</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Compute the transpose of a 2D matrix, the (more or less) hidden function. */</span></div>
<div class="line"><span class="comment">/* The input matrix is called B, the length in the two dimensions are</span></div>
<div class="line"><span class="comment">   called nb0 and nb1, respectively. */</span></div>
<div class="line"><span class="comment">/* The parameter buf provides the memory where the transpose should be</span></div>
<div class="line"><span class="comment">   stored. It is also returned. */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span>*</div>
<div class="line">transposeFunc(<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2)) {</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> nb0 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 0);</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> nb1 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1);</div>
<div class="line">  <a name="a7"></a><a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, A, nb1, nb0) = <a name="a8"></a><a class="code" href="group__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00.html#gadc87686dd0be0820fe983f3497823f00">P99_ALLOC</a>(*A);</div>
<div class="line">  <a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, j, 0, nb0) {</div>
<div class="line">    <span class="comment">/* sequentialize access to the rows of B */</span></div>
<div class="line">    <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, BV, nb1) = &amp;(*B)[j];</div>
<div class="line">    <a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, 0, nb1) {</div>
<div class="line">      (*A)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j] = (*BV)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> A;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a>(transposeFunc, <span class="keywordtype">void</span>*, (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2)), (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 2)), (), (2));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The user interface. */</span></div>
<div class="line"><span class="preprocessor">#define transpose(VB) ((double const(*)[P99_ALEN(*VB, 1)][P99_ALEN(*VB, 1)])P99_CA_CALL(transposeFunc, (), (2), P99_ACALL(VB, 2, double const)))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Use constants that represent the sizes of blocks for a</span></div>
<div class="line"><span class="comment">   decomposition of the matrices used by the mult function.</span></div>
<div class="line"><span class="comment">   The total amount of elements used in the inner part of the</span></div>
<div class="line"><span class="comment">   iteration will be (istep + jstep)*kstep for A and B, and</span></div>
<div class="line"><span class="comment">   istep*jstep for C. */</span></div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">  <span class="comment">/* A block should be such that several such submatrices will</span></div>
<div class="line"><span class="comment">     reasonably fit into the cache on a decent machine. */</span></div>
<div class="line">  blocksize = (1u &lt;&lt; 21)/<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>),</div>
<div class="line">  <span class="comment">/* istep * jstep should be such that the load into cache of any of</span></div>
<div class="line"><span class="comment">     the submatrices is associated to a large number of operations. */</span></div>
<div class="line">  istep = (1u &lt;&lt; 5),</div>
<div class="line">  jstep = (1u &lt;&lt; 5),</div>
<div class="line">  <span class="comment">/* The k-dimension of the matrices is accessed sequentially, so</span></div>
<div class="line"><span class="comment">     this part should be longer to give the automatic prefetcher an</span></div>
<div class="line"><span class="comment">     occasion to kick in. */</span></div>
<div class="line">  kstep = (blocksize - istep*jstep)/(istep + jstep)</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Compute the product of two 2D matrices. The (more or less) hidden</span></div>
<div class="line"><span class="comment">   function. */</span></div>
<div class="line"><span class="comment">/* The input matrices are called A and B. */</span></div>
<div class="line"><span class="comment">/* The matrix C receives the result. */</span></div>
<div class="line"><span class="comment">/* This function is not declared as inline. It will be way to big that</span></div>
<div class="line"><span class="comment">   this would make sense. */</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">multFunc(<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2),</div>
<div class="line">         <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2),</div>
<div class="line">         <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, C, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1)));</div>
<div class="line"> </div>
<div class="line"><a class="code" href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a>(multFunc,</div>
<div class="line">                    <span class="keywordtype">void</span>,</div>
<div class="line">                    (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2),</div>
<div class="line">                     <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2),</div>
<div class="line">                     <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, C, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1))),</div>
<div class="line">                    (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 2), <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 2), C),</div>
<div class="line">                    (),</div>
<div class="line">                    (2, 5, 6));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The user interface. It receives just the three pointers to</span></div>
<div class="line"><span class="comment">   the matrix as arguments. */</span></div>
<div class="line"><span class="preprocessor">#define mult(ARR, BRR, CRR)                                    \</span></div>
<div class="line"><span class="preprocessor">P99_CA_CALL(multFunc,                                          \</span></div>
<div class="line"><span class="preprocessor">            (),                                                \</span></div>
<div class="line"><span class="preprocessor">            (2, 5, 6),                                         \</span></div>
<div class="line"><span class="preprocessor">            P99_ACALL(ARR, 2, double const),                   \</span></div>
<div class="line"><span class="preprocessor">            P99_ACALL(BRR, 2, double const),                   \</span></div>
<div class="line"><span class="preprocessor">            CRR)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* All above would typically be written in a header (.h) file ***/</span></div>
<div class="line"><span class="comment">/****************************************************************/</span></div>
<div class="line"><span class="comment">/*************** end of interface section ***********************/</span></div>
<div class="line"><span class="comment">/****************************************************************/</span></div>
<div class="line"><span class="comment">/* From here on are only things that concern the implementation */</span></div>
<div class="line"><span class="comment">/* This starts with instantiations of for the inline function. **/</span></div>
<div class="line"> </div>
<div class="line"><a name="a9"></a><a class="code" href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a>(<span class="keywordtype">bool</span>, checkZeroFunc,</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, C, 2));</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a>(<span class="keywordtype">double</span>, dotproductFunc,</div>
<div class="line">                <span class="keywordtype">double</span>,</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 1),</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 1));</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a>(<span class="keywordtype">void</span>*, transposeFunc,</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a>(<span class="keywordtype">void</span>, multFunc,</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2),</div>
<div class="line">                <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2),</div>
<div class="line">                <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, C, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1)));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a name="a10"></a><a class="code" href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a>(printFunc, <span class="keywordtype">void</span>, (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2)), (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 2)), (), (2));</div>
<div class="line"><a class="code" href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a>(checkZeroFunc, <span class="keywordtype">bool</span>, (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, C, 2)), (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(C, 2)), (), (2));</div>
<div class="line"><a class="code" href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a>(dotproductFunc,</div>
<div class="line">                   <span class="keywordtype">double</span>,</div>
<div class="line">                   (<span class="keywordtype">double</span> ret, <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 1), <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 1)),</div>
<div class="line">                   (ret, <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 1), <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 1)), (), (2, 4));</div>
<div class="line"><a class="code" href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a>(multFunc,</div>
<div class="line">                   <span class="keywordtype">void</span>,</div>
<div class="line">                   (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2),</div>
<div class="line">                    <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2),</div>
<div class="line">                    <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, C, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1))),</div>
<div class="line">                   (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(A, 2), <a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 2), C),</div>
<div class="line">                   (),</div>
<div class="line">                   (2, 5, 6));</div>
<div class="line"> </div>
<div class="line"><a class="code" href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a>(transposeFunc,</div>
<div class="line">                   <span class="keywordtype">void</span>*,</div>
<div class="line">                   (<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2)),</div>
<div class="line">                   (<a class="code" href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a>(B, 2), buf),</div>
<div class="line">                   (),</div>
<div class="line">                   (2));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Matrix multiplication has three nested for loops. One for each</span></div>
<div class="line"><span class="comment">   dimension and on for the dotproduct between the rows of A and the</span></div>
<div class="line"><span class="comment">   columns of B. We split all these loops in two. One with a longer</span></div>
<div class="line"><span class="comment">   step count, the values istep, jstep and kstep from above, and an</span></div>
<div class="line"><span class="comment">   inner one that then goes through the individual elements.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For convenience we realize the inner three loops with step size 1</span></div>
<div class="line"><span class="comment">   as a macro. This will help optimization where all the three</span></div>
<div class="line"><span class="comment">   parameters ILEN, JLEN and KLEN correspond to compile time</span></div>
<div class="line"><span class="comment">   constants, namely istep, jstep and kstep, respectively.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ILEN, JLEN and KLEN are the length of the steps in the 3</span></div>
<div class="line"><span class="comment">   dimensions. Generally they will be equal to istep, jstep and kstep,</span></div>
<div class="line"><span class="comment">   respectively, but will be less than that for the last iteration. */</span></div>
<div class="line"><span class="preprocessor">#define INNER_CASE(C, A, B, ISTART, ILEN, JSTART, JLEN, KSTART, KLEN) \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* The local type that handles a partial line. Two of these will be   \</span></div>
<div class="line"><span class="comment">   created below and then be used for the dot product. */</span><span class="preprocessor">             \</span></div>
<div class="line"><span class="preprocessor">typedef double const kLineFrag[KLEN];                                 \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* The local type for the partial line in the result matrix C. */</span><span class="preprocessor">     \</span></div>
<div class="line"><span class="preprocessor">typedef double cLine[JLEN];                                           \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* None of the loops are parallelized at this level. All threads      \</span></div>
<div class="line"><span class="comment">   should have enough work to do such that they may reuse their       \</span></div>
<div class="line"><span class="comment">   caches well. */</span><span class="preprocessor">                                                    \</span></div>
<div class="line"><span class="preprocessor">P99_DO(size_t, i0, ISTART, ILEN) {                                    \</span></div>
<div class="line"><span class="preprocessor">  register kLineFrag* AF = (kLineFrag*)&amp;((*A)[i0][KSTART]);           \</span></div>
<div class="line"><span class="preprocessor">  register cLine*restrict CL = (cLine*)&amp;(*C)[i0][JSTART];             \</span></div>
<div class="line"><span class="preprocessor">  P99_DO(size_t, j0, JSTART, JLEN) {                                  \</span></div>
<div class="line"><span class="preprocessor">    register kLineFrag* BF = (kLineFrag*)&amp;((*B)[j0][KSTART]);         \</span></div>
<div class="line"><span class="preprocessor">    register double*restrict c = &amp;(*CL)[j0-JSTART];                   \</span></div>
<div class="line"><span class="preprocessor">    *c = dotproduct(AF, BF, *c);                                      \</span></div>
<div class="line"><span class="preprocessor">  }                                                                   \</span></div>
<div class="line"><span class="preprocessor">}</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The implementation of the function itself. */</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">multFunc(<a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, A, 2),</div>
<div class="line">         <a class="code" href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, B, 2),</div>
<div class="line">         <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, C, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1))) {</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> na0 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 0);</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> na1 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*A, 1);</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> nb0 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 0);</div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> nb1 = <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*B, 1);</div>
<div class="line">  <span class="comment">/* check that the dimensions of the matrices fit */</span></div>
<div class="line">  assert(na1 == nb0);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">double</span> times0 = omp_get_wtime();</div>
<div class="line">  <span class="comment">/* transpose B to have its columns consecutive in memory */</span></div>
<div class="line">  <span class="keywordtype">double</span> <span class="keyword">const</span> <a name="a11"></a><a class="code" href="group__VLA_gae86010cd3e4dfe56a5e579759f01ecbc.html#gae86010cd3e4dfe56a5e579759f01ecbc">P99_ARRAY</a>(*BS, nb1, nb0) = transpose(B);</div>
<div class="line">  assert(checkZero(C));</div>
<div class="line">  <span class="keywordtype">double</span> times1 = omp_get_wtime();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* The loop for the dot product cannot be easily parallelized</span></div>
<div class="line"><span class="comment">     because it accumulates the result. If we would want to do this,</span></div>
<div class="line"><span class="comment">     we would need to use reduction for the entries of C. */</span></div>
<div class="line">  <a class="code" href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a>(<span class="keywordtype">size_t</span>, k, 0, na1, kstep) {</div>
<div class="line">    <span class="comment">/* The loops in the 2 dimensions can be parallelized because every</span></div>
<div class="line"><span class="comment">       entry of the result is computed independently. Organize a</span></div>
<div class="line"><span class="comment">       sufficiently large block for every individual thread such that</span></div>
<div class="line"><span class="comment">       it is able to reuse cached values repeatedly. For the general</span></div>
<div class="line"><span class="comment">       execution a thread works on</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">       (istep + jstep)*kstep</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">       elements for matrices A and B, C must not necessarily be</span></div>
<div class="line"><span class="comment">       cached. On these it performs istep*jstep*kstep operations, so</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">       istep*jstep / (istep + jstep)</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">       or about istep/2 operations per entry. */</span></div>
<div class="line">    <a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, 0, na0, istep) {</div>
<div class="line">      <a class="code" href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a>(<span class="keywordtype">size_t</span>, j, 0, nb1, jstep) {</div>
<div class="line">        <span class="keyword">register</span> <span class="keywordtype">size_t</span> <span class="keyword">const</span> kMax = (na1 - k);</div>
<div class="line">        <span class="keyword">register</span> <span class="keywordtype">size_t</span> <span class="keyword">const</span> iMax = (na0 - <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>);</div>
<div class="line">        <span class="keyword">register</span> <span class="keywordtype">size_t</span> <span class="keyword">const</span> jMax = (nb1 - j);</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a12"></a><a class="code" href="group__compiler__utilities_gaeb07ca696b97a2403f7dc2685c99197e.html#gaeb07ca696b97a2403f7dc2685c99197e">P99_LIKELY</a>(iMax &gt;= istep)) {</div>
<div class="line">          <span class="keywordflow">if</span> (<a class="code" href="group__compiler__utilities_gaeb07ca696b97a2403f7dc2685c99197e.html#gaeb07ca696b97a2403f7dc2685c99197e">P99_LIKELY</a>(jMax &gt;= jstep)) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__compiler__utilities_gaeb07ca696b97a2403f7dc2685c99197e.html#gaeb07ca696b97a2403f7dc2685c99197e">P99_LIKELY</a>(kMax &gt;= kstep)) {</div>
<div class="line">              <span class="comment">/* This is the principal case for which we want to</span></div>
<div class="line"><span class="comment">                 optimize as much as possible. */</span></div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, istep, j, jstep, k, kstep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, istep, j, jstep, k, kMax);</div>
<div class="line">            }</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (kMax &gt;= kstep) {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, istep, j, jMax, k, kstep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, istep, j, jMax, k, kMax);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="keywordflow">if</span> (jMax &gt;= jstep) {</div>
<div class="line">            <span class="keywordflow">if</span> (kMax &gt;= kstep) {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, iMax, j, jstep, k, kstep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, iMax, j, jstep, k, kMax);</div>
<div class="line">            }</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (kMax &gt;= kstep) {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, iMax, j, jMax, k, kstep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              INNER_CASE(C, A, BS, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, iMax, j, jMax, k, kMax);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">double</span> times2 = omp_get_wtime();</div>
<div class="line">  printf(<span class="stringliteral">&quot;%s time:\t%g\n&quot;</span>, <span class="stringliteral">&quot;setup&quot;</span>, times1 - times0);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%s time:\t%g\n&quot;</span>, <span class="stringliteral">&quot;mult&quot;</span>, times2 - times1);</div>
<div class="line">  free((<span class="keywordtype">void</span>*)BS);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a name="a13"></a><a class="code" href="p99__init_8h_aa4e97f3782107649d3e4eb3875090b3a.html#aa4e97f3782107649d3e4eb3875090b3a">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>*argv[]) {</div>
<div class="line"><span class="preprocessor">#if __STDC_WANT_LIB_EXT1__</span></div>
<div class="line">  set_constraint_handler_s(abort_handler_s);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (argc &lt;= 3) {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Usage: %s n k m p e\n&quot;</span>, argv[0]);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;   for matrices C[n][m] = A[n][k] * B[k][m]\n&quot;</span>, stderr);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;   with p OpenMP processors\n&quot;</span>, stderr);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;   error generation e: 0 - no error\n&quot;</span>, stderr);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;                       1 - size error in C\n&quot;</span>, stderr);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;                       2 - null pointer for C\n&quot;</span>, stderr);</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">size_t</span> <a name="a14"></a><a class="code" href="group__C11__library_ga78e2423edb5a2df31972b326c83c4df4.html#ga78e2423edb5a2df31972b326c83c4df4">p</a> = 1;</div>
<div class="line">  <a name="a15"></a><a class="code" href="group__types_gadfc4a740e019532904e5577e7ece9090.html#gadfc4a740e019532904e5577e7ece9090">P99_UNUSED</a>(<a class="code" href="group__C11__library_ga78e2423edb5a2df31972b326c83c4df4.html#ga78e2423edb5a2df31972b326c83c4df4">p</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 4)</div>
<div class="line">    <a class="code" href="group__C11__library_ga78e2423edb5a2df31972b326c83c4df4.html#ga78e2423edb5a2df31972b326c83c4df4">p</a> = <a name="a16"></a><a class="code" href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a>(argv[4], NULL, 0);</div>
<div class="line">  omp_set_num_threads(<a class="code" href="group__C11__library_ga78e2423edb5a2df31972b326c83c4df4.html#ga78e2423edb5a2df31972b326c83c4df4">p</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">size_t</span> err = 0;</div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt; 5)</div>
<div class="line">    err = <a class="code" href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a>(argv[5], NULL, 0);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="group__VLA_gae86010cd3e4dfe56a5e579759f01ecbc.html#gae86010cd3e4dfe56a5e579759f01ecbc">P99_ARRAY</a>(A, 3, 2) = {</div>
<div class="line">    {2, 3 },</div>
<div class="line">    {1, 1 },</div>
<div class="line">    {-1, 0}</div>
<div class="line">  };</div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, AP, 3, 2) = &amp;A;</div>
<div class="line">  print(AP);</div>
<div class="line">  <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="group__VLA_gae86010cd3e4dfe56a5e579759f01ecbc.html#gae86010cd3e4dfe56a5e579759f01ecbc">P99_ARRAY</a>(B, 2, 4) = {</div>
<div class="line">    {2, 3, -1, 0},</div>
<div class="line">    {1, 1, 2, 1},</div>
<div class="line">  };</div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span> <span class="keyword">const</span>, BP, 2, 4) = &amp;B;</div>
<div class="line">  print(BP);</div>
<div class="line">  dotproduct(&amp;(*BP)[0], &amp;(*BP)[1]);</div>
<div class="line">  <span class="keywordtype">double</span> <a class="code" href="group__VLA_gae86010cd3e4dfe56a5e579759f01ecbc.html#gae86010cd3e4dfe56a5e579759f01ecbc">P99_ARRAY</a>(C, 3, 4) = {</div>
<div class="line">    {0, 0, 0, 0},</div>
<div class="line">    {0, 0, 0, 0},</div>
<div class="line">    {0, 0, 0, 0},</div>
<div class="line">  };</div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, CP, 3, 4) = &amp;C;</div>
<div class="line">  mult(AP, BP, CP);</div>
<div class="line">  print(CP);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Now demonstrate the use of the matrix multiplication code with</span></div>
<div class="line"><span class="comment">     matrices that have dynamic length. */</span></div>
<div class="line">  <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> n = <a class="code" href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a>(argv[1]);</div>
<div class="line">  <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> m = <a class="code" href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a>(argv[2]);</div>
<div class="line">  <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> k = <a class="code" href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a>(argv[3]);</div>
<div class="line">  printf(<span class="stringliteral">&quot;matrix length are n=%zu, m=%zu, k=%zu\n&quot;</span>, n, m, k);</div>
<div class="line">  printf(<span class="stringliteral">&quot;step   length are n=%d, m=%d, k=%d\n&quot;</span>, istep, jstep, kstep);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Allocate the three matrices. The matrix dimensions are only</span></div>
<div class="line"><span class="comment">     specified on the left side. The allocation expression only uses</span></div>
<div class="line"><span class="comment">     the base type and sizeof information to do the allocation.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">     Also, each of n, m, k occurs exactly once, so the other</span></div>
<div class="line"><span class="comment">     dimensions are enforced. */</span></div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, AR, n, <span class="comment">/*          */</span> k <span class="comment">/*          */</span>) = <a class="code" href="group__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00.html#gadc87686dd0be0820fe983f3497823f00">P99_ALLOC</a>(*AR);</div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, BR, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*AR, 1), m <span class="comment">/*          */</span>) = <a class="code" href="group__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00.html#gadc87686dd0be0820fe983f3497823f00">P99_ALLOC</a>(*BR);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Test the error checks by perturbing matrix C:</span></div>
<div class="line"><span class="comment">     - if err is 1 we add one to the size so a size mismatch should be detected</span></div>
<div class="line"><span class="comment">     - if err is 2 we don&#39;t alloc but set to 0, so a null pointer should be detected */</span></div>
<div class="line">  <a class="code" href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a>(<span class="keywordtype">double</span>, CR, <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*AR, 0)</div>
<div class="line">           <span class="comment">/*   */</span> + (err == 1 ? 1 : 0),</div>
<div class="line">           <span class="comment">/*                         */</span> <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*BR, 1)) = (err == 2 ? 0 : <a class="code" href="group__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00.html#gadc87686dd0be0820fe983f3497823f00">P99_ALLOC</a>(*CR, <a name="a17"></a><a class="code" href="group__integers_gab9cabeffe9c354f9775a53a79313d71b.html#gab9cabeffe9c354f9775a53a79313d71b">P99_LVAL</a>(<span class="keywordtype">double</span>)));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Initialize the two matrices to some arbitrary values */</span></div>
<div class="line">  <span class="comment">/* This replaces the following nested loops: */</span></div>
<div class="line">  <span class="comment">/* for (size_t j = 0; j &lt; n; ++j) */</span></div>
<div class="line">  <span class="comment">/*   for (size_t i = 0; i &lt; k; ++i) */</span></div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> D[2] = { <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*AR, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*AR, 1) };</div>
<div class="line">  <a name="a18"></a><a class="code" href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83">P99_FORALL</a>(D, j, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>) (*AR)[j][<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>] = <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>*j;</div>
<div class="line">  <span class="comment">/* This replaces the following nested loops: */</span></div>
<div class="line">  <span class="comment">/* for (size_t i = 0; i &lt; k; ++i) */</span></div>
<div class="line">  <span class="comment">/*   for (size_t j = 0; j &lt; m; ++j) */</span></div>
<div class="line">  <span class="keywordtype">size_t</span> <span class="keyword">const</span> E[2] = { <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*BR, 0), <a class="code" href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a>(*BR, 1)};</div>
<div class="line">  <a class="code" href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83">P99_FORALL</a>(E, <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, j) (*BR)[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j] = j + <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* run the multiplication itself */</span></div>
<div class="line">  mult(AR, BR, CR);</div>
<div class="line">  free(AR);</div>
<div class="line">  free(BR);</div>
<div class="line">  free(CR);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* follow just some arbitrary compile tests */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> { A = 3 };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">size_t</span> A0 = <a name="a19"></a><a class="code" href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a>(0, A);</div>
<div class="line"><span class="keywordtype">size_t</span> A1 = <a class="code" href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a>(1, A);</div>
<div class="line"><span class="keywordtype">size_t</span> A2 = <a class="code" href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a>(2, A);</div>
<div class="line"><span class="keywordtype">size_t</span> A3 = <a class="code" href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a>(3, A);</div>
<div class="line"><span class="keywordtype">size_t</span> A4 = <a class="code" href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a>(4, A);</div>
<div class="line"> </div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="ap99__for_8h_html"><div class="ttname"><a href="p99__for_8h.html">p99_for.h</a></div><div class="ttdoc">A preprocessor for loop implementation and some derived list handling macros.</div></div>
<div class="ttc" id="ap99__new_8h_html"><div class="ttname"><a href="p99__new_8h.html">p99_new.h</a></div><div class="ttdoc">Macros for initialization and allocation.</div></div>
<div class="ttc" id="agroup__VLA_gae86010cd3e4dfe56a5e579759f01ecbc_html_gae86010cd3e4dfe56a5e579759f01ecbc"><div class="ttname"><a href="group__VLA_gae86010cd3e4dfe56a5e579759f01ecbc.html#gae86010cd3e4dfe56a5e579759f01ecbc">P99_ARRAY</a></div><div class="ttdeci">#define P99_ARRAY(ARR,...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00588">p99_for.h:588</a></div></div>
<div class="ttc" id="agroup__compiler__utilities_gaeb07ca696b97a2403f7dc2685c99197e_html_gaeb07ca696b97a2403f7dc2685c99197e"><div class="ttname"><a href="group__compiler__utilities_gaeb07ca696b97a2403f7dc2685c99197e.html#gaeb07ca696b97a2403f7dc2685c99197e">P99_LIKELY</a></div><div class="ttdeci">#define P99_LIKELY(...)</div><div class="ttdoc">Mark the conditional expression as being likely.</div><div class="ttdef"><b>Definition:</b> <a href="p99__compiler_8h_source.html#l01002">p99_compiler.h:1002</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83_html_gaa617d014eeeaa561e1ff063b2014df83"><div class="ttname"><a href="group__preprocessor__blocks_gaa617d014eeeaa561e1ff063b2014df83.html#gaa617d014eeeaa561e1ff063b2014df83">P99_FORALL</a></div><div class="ttdeci">#define P99_FORALL(NAME,...)</div><div class="ttdoc">A multi-index for loop.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00948">p99_for.h:948</a></div></div>
<div class="ttc" id="ap99__map_8h_html"><div class="ttname"><a href="p99__map_8h.html">p99_map.h</a></div><div class="ttdoc">macros to produce lists of statements or declarations.</div></div>
<div class="ttc" id="agroup__VLA_ga5156ad7635dc55f8fa02c8e88718442a_html_ga5156ad7635dc55f8fa02c8e88718442a"><div class="ttname"><a href="group__VLA_ga5156ad7635dc55f8fa02c8e88718442a.html#ga5156ad7635dc55f8fa02c8e88718442a">P99_ALEN</a></div><div class="ttdeci">#define P99_ALEN(ARR, N)</div><div class="ttdoc">Produce the length of the argument array ARR in terms of number of elements.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00670">p99_for.h:670</a></div></div>
<div class="ttc" id="agroup__VLA_gad39db1984f1f396b1fb980b55dbe4a88_html_gad39db1984f1f396b1fb980b55dbe4a88"><div class="ttname"><a href="group__VLA_gad39db1984f1f396b1fb980b55dbe4a88.html#gad39db1984f1f396b1fb980b55dbe4a88">P99_AARG</a></div><div class="ttdeci">#define P99_AARG(TYPE, NAME, DIM, VAR)</div><div class="ttdoc">Declare a pointer to array function argument of basetype TYPE, with name NAME, dimension DIM and nami...</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00742">p99_for.h:742</a></div></div>
<div class="ttc" id="agroup__C11__library_ga78e2423edb5a2df31972b326c83c4df4_html_ga78e2423edb5a2df31972b326c83c4df4"><div class="ttname"><a href="group__C11__library_ga78e2423edb5a2df31972b326c83c4df4.html#ga78e2423edb5a2df31972b326c83c4df4">p</a></div><div class="ttdeci">P00_CLAUSE2 p(P00_WEAK1(p00_cb))(P00_WEAK2(p00_cb)) pp99_callback_stack p00_at_quick_exit</div></div>
<div class="ttc" id="ap99__checkargs_8h_html"><div class="ttname"><a href="p99__checkargs_8h.html">p99_checkargs.h</a></div><div class="ttdoc">Macros to check arguments to functions, in particular of variably modified types.</div></div>
<div class="ttc" id="agroup__types_gadfc4a740e019532904e5577e7ece9090_html_gadfc4a740e019532904e5577e7ece9090"><div class="ttname"><a href="group__types_gadfc4a740e019532904e5577e7ece9090.html#gadfc4a740e019532904e5577e7ece9090">P99_UNUSED</a></div><div class="ttdeci">#define P99_UNUSED(...)</div><div class="ttdoc">check if the list of expressions is syntactically valid but don't evaluate it</div><div class="ttdef"><b>Definition:</b> <a href="p99__enum_8h_source.html#l00207">p99_enum.h:207</a></div></div>
<div class="ttc" id="agroup__integers_gab9cabeffe9c354f9775a53a79313d71b_html_gab9cabeffe9c354f9775a53a79313d71b"><div class="ttname"><a href="group__integers_gab9cabeffe9c354f9775a53a79313d71b.html#gab9cabeffe9c354f9775a53a79313d71b">P99_LVAL</a></div><div class="ttdeci">#define P99_LVAL(...)</div><div class="ttdoc">Define an lvalue of type T, where T is the first parameter in the variable parameter list.</div><div class="ttdef"><b>Definition:</b> <a href="p99__int_8h_source.html#l01076">p99_int.h:1076</a></div></div>
<div class="ttc" id="agroup__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31_html_ga31beb87319d18e14d3ed770ed29eeb31"><div class="ttname"><a href="group__statement__lists_ga31beb87319d18e14d3ed770ed29eeb31.html#ga31beb87319d18e14d3ed770ed29eeb31">P99_IPOW</a></div><div class="ttdeci">#define P99_IPOW(N, X)</div><div class="ttdoc">Compute the Nth multiplicative integer power of X.</div><div class="ttdef"><b>Definition:</b> <a href="p99__map_8h_source.html#l00059">p99_map.h:59</a></div></div>
<div class="ttc" id="ap99__atomic_8h_html"><div class="ttname"><a href="p99__atomic_8h.html">p99_atomic.h</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435_html_ga41d6ee07b6d45361720a01e1064bd435"><div class="ttname"><a href="group__preprocessor__blocks_ga41d6ee07b6d45361720a01e1064bd435.html#ga41d6ee07b6d45361720a01e1064bd435">P99_DO</a></div><div class="ttdeci">#define P99_DO(TYPE, VAR, LOW, LEN, INCR)</div><div class="ttdoc">A fortran like do-loop with bounds that are fixed at the beginning.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00874">p99_for.h:874</a></div></div>
<div class="ttc" id="agroup__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c_html_gad3ae3bc406d8c25cbe260fbe76ba989c"><div class="ttname"><a href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a></div><div class="ttdeci">#define P99_INSTANTIATE(RT, NAME,...)</div><div class="ttdoc">Instantiate an inline function.</div><div class="ttdef"><b>Definition:</b> <a href="p99__defarg_8h_source.html#l00233">p99_defarg.h:233</a></div></div>
<div class="ttc" id="ap99__init_8h_aa4e97f3782107649d3e4eb3875090b3a_html_aa4e97f3782107649d3e4eb3875090b3a"><div class="ttname"><a href="p99__init_8h_aa4e97f3782107649d3e4eb3875090b3a.html#aa4e97f3782107649d3e4eb3875090b3a">main</a></div><div class="ttdeci">#define main</div></div>
<div class="ttc" id="agroup__stringconversion_gaf796727a46b6d734197a01f104afee95_html_gaf796727a46b6d734197a01f104afee95"><div class="ttname"><a href="group__stringconversion_gaf796727a46b6d734197a01f104afee95.html#gaf796727a46b6d734197a01f104afee95">strtoul</a></div><div class="ttdeci">#define strtoul(...)</div><div class="ttdoc">Default arguments for C99 function strtoul</div><div class="ttdef"><b>Definition:</b> <a href="p99__c99__default_8h_source.html#l00198">p99_c99_default.h:198</a></div></div>
<div class="ttc" id="ap99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda_html_a57a586489a0c58f01ad0e9d31e7c2eda"><div class="ttname"><a href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a></div><div class="ttdeci">P00_CLAUSE2 i(_Pragma(&quot;weak  p00_getopt_comp&quot;))(_Pragma(&quot;weak p00_getopt_comp </div></div>
<div class="ttc" id="agroup__VLA_gaf7d8afa64602113cfb4e99e93188f291_html_gaf7d8afa64602113cfb4e99e93188f291"><div class="ttname"><a href="group__VLA_gaf7d8afa64602113cfb4e99e93188f291.html#gaf7d8afa64602113cfb4e99e93188f291">P99_AREF</a></div><div class="ttdeci">#define P99_AREF(T, ARR,...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00589">p99_for.h:589</a></div></div>
<div class="ttc" id="agroup__VLA_gaffba75783d0d22abecae4fb7d19e8006_html_gaffba75783d0d22abecae4fb7d19e8006"><div class="ttname"><a href="group__VLA_gaffba75783d0d22abecae4fb7d19e8006.html#gaffba75783d0d22abecae4fb7d19e8006">P99_ANAME</a></div><div class="ttdeci">#define P99_ANAME(NAME, DIM, VAR)</div><div class="ttdoc">Declare list of variable names as produced by P99_AARG.</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00756">p99_for.h:756</a></div></div>
<div class="ttc" id="agroup__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00_html_gadc87686dd0be0820fe983f3497823f00"><div class="ttname"><a href="group__preprocessor__allocation_gadc87686dd0be0820fe983f3497823f00.html#gadc87686dd0be0820fe983f3497823f00">P99_ALLOC</a></div><div class="ttdeci">#define P99_ALLOC(...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__new_8h_source.html#l00202">p99_new.h:202</a></div></div>
<div class="ttc" id="ap99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42_html_a01832445037d0b96fb8d4a4dd39add42"><div class="ttname"><a href="p99__checkargs_8h_a01832445037d0b96fb8d4a4dd39add42.html#a01832445037d0b96fb8d4a4dd39add42">P99_CA_WRAP_DEFINE</a></div><div class="ttdeci">#define P99_CA_WRAP_DEFINE(NAME, RET, TYPES, VARS,...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__checkargs_8h_source.html#l00180">p99_checkargs.h:180</a></div></div>
<div class="ttc" id="agroup__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7_html_ga966baf107822e22a4bbce453b6d7f3a7"><div class="ttname"><a href="group__preprocessor__blocks_ga966baf107822e22a4bbce453b6d7f3a7.html#ga966baf107822e22a4bbce453b6d7f3a7">P99_PARALLEL_DO</a></div><div class="ttdeci">#define P99_PARALLEL_DO(TYPE, VAR, LOW, LEN, INCR)</div><div class="ttdoc">as P99_DO but performs the iterations out of order</div><div class="ttdef"><b>Definition:</b> <a href="p99__for_8h_source.html#l00881">p99_for.h:881</a></div></div>
<div class="ttc" id="ap99__c99__default_8h_html"><div class="ttname"><a href="p99__c99__default_8h.html">p99_c99_default.h</a></div></div>
<div class="ttc" id="ap99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d_html_aa899e8ba351ca59e8077f0d2bc01882d"><div class="ttname"><a href="p99__checkargs_8h_aa899e8ba351ca59e8077f0d2bc01882d.html#aa899e8ba351ca59e8077f0d2bc01882d">P99_CA_WRAP_DECLARE</a></div><div class="ttdeci">#define P99_CA_WRAP_DECLARE(NAME, RET, TYPES, VARS,...)</div><div class="ttdef"><b>Definition:</b> <a href="p99__checkargs_8h_source.html#l00162">p99_checkargs.h:162</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
