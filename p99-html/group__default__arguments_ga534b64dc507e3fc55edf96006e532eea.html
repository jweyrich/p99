<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P99: P99_CALL_DEFARG</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P99
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="group__default__arguments.html">Default arguments and types for functions</a></li>  </ul>
</div>
</div><!-- top -->
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindexHL" href="group__default__arguments_ga534b64dc507e3fc55edf96006e532eea.html#ga534b64dc507e3fc55edf96006e532eea">P99_CALL_DEFARG</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_ga69b2187bb0e91a56c471cb19a1c3d9fb.html#ga69b2187bb0e91a56c471cb19a1c3d9fb">P99_CALL_DEFARG_LIST</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_ga1ab494ddea95bb2d2f87f5eed1898b1c.html#ga1ab494ddea95bb2d2f87f5eed1898b1c">P99_CALL_VA_ARG</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1.html#ga118e9c06ec0818f31fd1ada56b30c7d1">P99_DECLARE_DEFARG</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_ga4918cf7a052529294962b223e25dd1d7.html#ga4918cf7a052529294962b223e25dd1d7">P99_DEFARG_DOCU</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_ga03f50eb13156ed43232aea25cf6784fe.html#ga03f50eb13156ed43232aea25cf6784fe">P99_DEFINE_DEFARG</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_gad3ae3bc406d8c25cbe260fbe76ba989c.html#gad3ae3bc406d8c25cbe260fbe76ba989c">P99_INSTANTIATE</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35">P99_PROTOTYPE</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a id="ga534b64dc507e3fc55edf96006e532eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga534b64dc507e3fc55edf96006e532eea">&#9670;&nbsp;</a></span>P99_CALL_DEFARG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define P99_CALL_DEFARG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">NAME, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">M, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;NAME(__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a replacement macro for functions that can provide default arguments to the underlying real function. </p>
<p>This macro may be used for &lsquo;overloading&rsquo; system functions or functions that you define yourself. It is easiest to explain this with an example. The system function <code>pthread_mutex_init</code> is defined as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a>(pthread_mutex_t *mut, pthread_mutexattr_t* attr);</div>
</div><!-- fragment --><p>Here the second argument is used to specify an &lsquo;attribute&rsquo; to the mutex <code>mut</code>. Most people don't use that functionality and therefore <code>pthread_mutex_init</code> accepts a null pointer constant as a replacement for <code>attr</code>. This might be annoying since the focus of the syntax is on the exception rather than on the main use: the programmer always has to remember this particular special case and give explicit <code>0's</code>.</p>
<p>The following lines heal this.</p>
<div class="fragment"><div class="line"><a class="code" href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35">P99_PROTOTYPE</a>(<span class="keywordtype">int</span>, <a class="code" href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a>, pthread_mutex_t*, pthread_mutexattr_t <span class="keyword">const</span>*);</div>
<div class="line"><span class="preprocessor">#define pthread_mutex_init(...) P99_CALL_DEFARG(pthread_mutex_init, 2, __VA_ARGS__)</span></div>
<div class="line"><span class="preprocessor">P99_DECLARE_DEFARG(pthread_mutex_init, , (pthread_mutexattr_t*)0);</span></div>
</div><!-- fragment --><p>This declares a macro <code>pthread_mutex_init</code> that resolves to the call of a real function to initialize a <code>pthread_mutexattr_t*</code>. If invoked with two arguments or more, the macro expansion just results in the usual call to the function.</p>
<p>If the initialization value for argument 1 is omitted (arguments count from 0) the default value of a null pointer constant is used. Valid use is</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;</div>
<div class="line"><span class="keyword">static</span> pthread_mutexattr_t attr;</div>
<div class="line">.</div>
<div class="line">pthread_mutex_init(&amp;mut, &amp;attr); <span class="comment">// full specification with attributes</span></div>
<div class="line"><a class="code" href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a>(&amp;mut, 0);     <span class="comment">// still a valid form</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// easy variant for everyday use, equivalent to the previous one</span></div>
<div class="line"><a class="code" href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a>(&amp;mut);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Also function pointers can still be taken.</span></div>
<div class="line">int (*myFunc)(pthread_mutex_t *, pthread_mutexattr_t*) = <a class="code" href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a>;</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">NAME</td><td>is the function to provide with default argument features. </td></tr>
    <tr><td class="paramname">M</td><td>is the number of arguments that a full call to <em>NAME</em> takes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1.html#ga118e9c06ec0818f31fd1ada56b30c7d1" title="Provide default arguments for macro NAME.">P99_DECLARE_DEFARG</a> </dd>
<dd>
<a class="el" href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35" title="Define the prototype of function NAME.">P99_PROTOTYPE</a></dd></dl>
<p>This macro is more flexible than the corresponding C++ feature of default arguments. It also lets you omit middle arguments.</p>
<p>More technically, for arguments that are omitted this just requires that NAME_defarg_M is defined for function <em>NAME</em> and <em>M</em> and that it is callable without arguments. This may just be a function (as implicitly defined by <a class="el" href="group__default__arguments_ga118e9c06ec0818f31fd1ada56b30c7d1.html#ga118e9c06ec0818f31fd1ada56b30c7d1" title="Provide default arguments for macro NAME.">P99_DECLARE_DEFARG</a>) or a macro. For the first case everything the function refers to must be declared at the point of its definition. For the second case, the macro is evaluated at the place of the call and could refer to local variables or anything you like. </p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<div class="ttc" id="agroup__posix__default_gaac0022c8e6bd988145077706c4eb9931_html_gaac0022c8e6bd988145077706c4eb9931"><div class="ttname"><a href="group__posix__default_gaac0022c8e6bd988145077706c4eb9931.html#gaac0022c8e6bd988145077706c4eb9931">pthread_mutex_init</a></div><div class="ttdeci">#define pthread_mutex_init(...)</div><div class="ttdoc">Default arguments for POSIX function pthread_mutex_init.</div><div class="ttdef"><b>Definition:</b> <a href="p99__posix__default_8h_source.html#l00058">p99_posix_default.h:58</a></div></div>
<div class="ttc" id="agroup__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35_html_gad246cad7a697b694ecf0bbda6e0cbb35"><div class="ttname"><a href="group__default__arguments_gad246cad7a697b694ecf0bbda6e0cbb35.html#gad246cad7a697b694ecf0bbda6e0cbb35">P99_PROTOTYPE</a></div><div class="ttdeci">#define P99_PROTOTYPE(...)</div><div class="ttdoc">Define the prototype of function NAME.</div><div class="ttdef"><b>Definition:</b> <a href="p99__defarg_8h_source.html#l00197">p99_defarg.h:197</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
