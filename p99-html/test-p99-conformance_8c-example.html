<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P99: test-p99-conformance.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P99
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">test-p99-conformance.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>A file that provides a test for C99 conformance.It only tests the "compiler" part of C, that is without any include files. Any C implementation, whether hosted or freestanding should comply with this.</p>
<p>To convince your compiler to compile this you might have to provide some additional parameters on the command line. E.g for the gcc family of compilers (including third party pretenders) you usually have to give "-std=c99" to switch to C99 mode. But other parameters may be in order, consult your compiler documentation.</p>
<p>This file is split into several parts that hopefully are self explanatory. Each of the parts has a macro <code>SKIP_</code>... that lets you skip a test.</p>
<div class="fragment"><div class="line"><span class="comment">/* This may look like nonsense, but it really is -*- mode: C; coding: utf-8 -*- */</span></div>
<div class="line"><span class="comment">/*                                                                           */</span></div>
<div class="line"><span class="comment">/* Except of parts copied from previous work and as explicitly stated below, */</span></div>
<div class="line"><span class="comment">/* the author and copyright holder for this work is                          */</span></div>
<div class="line"><span class="comment">/* (C) copyright  2011 Jens Gustedt, INRIA, France                           */</span></div>
<div class="line"><span class="comment">/*                                                                           */</span></div>
<div class="line"><span class="comment">/* This file is free software; it is part of the P99 project.                */</span></div>
<div class="line"><span class="comment">/* You can redistribute it and/or modify it under the terms of the QPL as    */</span></div>
<div class="line"><span class="comment">/* given in the file LICENSE. It is distributed without any warranty;        */</span></div>
<div class="line"><span class="comment">/* without even the implied warranty of merchantability or fitness for a     */</span></div>
<div class="line"><span class="comment">/* particular purpose.                                                       */</span></div>
<div class="line"><span class="comment">/*                                                                           */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_VA_ARGS_MACRO</span></div>
<div class="line"><span class="preprocessor"># define FIRST(X, ...) X</span></div>
<div class="line"><span class="preprocessor"># if FIRST(0, something)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;The preprocessor lacks variable argument list support. Run test with -DSKIP_VA_ARGS_MACRO to be able to see the other tests.&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_BOOL</span></div>
<div class="line"><span class="keyword">enum</span> { hasTrue = (_Bool)127, hasFalse = (_Bool)0 };</div>
<div class="line">_Bool has_Bool[1];</div>
<div class="line">_Bool has_Bool[hasTrue] = { hasFalse };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_VLA</span></div>
<div class="line"><span class="keywordtype">double</span> has_VLA_function(<span class="keywordtype">unsigned</span> n, <span class="keywordtype">double</span> A[n][n]) {</div>
<div class="line">  <span class="keywordtype">double</span> ret = 0.0;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <a name="a0"></a><a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>, j;</div>
<div class="line">  <span class="keywordflow">for</span> (<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a> = 0; <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a> &lt; n; ++<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>)</div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; n; ++j)</div>
<div class="line">      ret += A[<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>][j];</div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">double</span> has_VLA(<span class="keywordtype">unsigned</span> n) {</div>
<div class="line">  <span class="keywordtype">double</span> VLA[n][n];</div>
<div class="line">  <span class="keywordflow">return</span> has_VLA_function(n, VLA);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_INLINE</span></div>
<div class="line"><span class="keyword">typedef</span> <a name="a1"></a><a class="code" href="p99__bitset_8h_a397f25d90863f345d65d0cd64bc2c733.html#a397f25d90863f345d65d0cd64bc2c733">void</a> (*func)(<a class="code" href="p99__bitset_8h_a397f25d90863f345d65d0cd64bc2c733.html#a397f25d90863f345d65d0cd64bc2c733">void</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This alone should not result in a generation of a symbol</span></div>
<div class="line"><span class="comment">   &quot;has_undefined_symbol1&quot;. It should even not have an entry as</span></div>
<div class="line"><span class="comment">   &quot;undefined&quot; in the symbol table, but such an entry would be</span></div>
<div class="line"><span class="comment">   tolerable. */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_undefined_symbol1(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This alone should not result in a generation of a symbol</span></div>
<div class="line"><span class="comment">   &quot;undefined_symbol2&quot; but insert an &quot;undefined&quot; symbol to such a</span></div>
<div class="line"><span class="comment">   function in the symbol table. */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_undefined_symbol2(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line">func undefined_symbol2_tester[] = { has_undefined_symbol2 };</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This should result in a generation of a symbol has_mandatory_symbol1 */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol1(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="keyword">extern</span> <span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol1(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This should result in a generation of a symbol has_mandatory_symbol2 */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol2(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line">func mandatory_symbol2_tester[] = { has_mandatory_symbol2 };</div>
<div class="line"><span class="keyword">extern</span> <span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol2(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This should result in a generation of a symbol has_mandatory_symbol3 */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol3(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol3(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* This should result in a generation of a symbol has_mandatory_symbol4 */</span></div>
<div class="line"><span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol4(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line">func mandatory_symbol4_tester[] = { has_mandatory_symbol4 };</div>
<div class="line"><span class="keyword">extern</span> <span class="keyword">inline</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">has_mandatory_symbol4(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_HEXDOUBLE</span></div>
<div class="line"><span class="keyword">enum</span> { hasHexdouble = (0x1P2 &gt; 10) };</div>
<div class="line"><span class="keywordtype">double</span> has_hexdouble[hasHexdouble];</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_COMPOUND</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_compound_literal(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span>){ 0 };</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_INITIALIZERS</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_designated_array_initializer[4] = { [3] = 1u };</div>
<div class="line"><span class="keywordtype">unsigned</span> A1[] = { [3] = 1u };</div>
<div class="line"><span class="keywordtype">unsigned</span> has_length_from_initializer[<span class="keyword">sizeof</span>(has_designated_array_initializer) == <span class="keyword">sizeof</span>(A1)];</div>
<div class="line"><span class="keyword">struct </span>{</div>
<div class="line">  <span class="keywordtype">unsigned</span> first;</div>
<div class="line">  <span class="keywordtype">double</span> second;</div>
<div class="line">} has_designated_struct_initializer = { .second = 1, .first = 2 };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define GLUE2(A, B) A ## B</span></div>
<div class="line"><span class="preprocessor">#define CONCAT2(A, B) GLUE2(A, B)</span></div>
<div class="line"><span class="preprocessor">#define STRINGIFY(A) STRINGIFY_(A)</span></div>
<div class="line"><span class="preprocessor">#define STRINGIFY_(A) #A</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_TOKEN_CONCAT</span></div>
<div class="line"><span class="keywordtype">double</span> has_concat_of_floats_1E = CONCAT2(1E, 3);</div>
<div class="line"><span class="keywordtype">double</span> has_concat_of_floats_1Ep = CONCAT2(1E+, 3);</div>
<div class="line"><span class="comment">/* This one should iteratively compose a double value from left to</span></div>
<div class="line"><span class="comment">   right. */</span></div>
<div class="line"><span class="preprocessor"># ifndef SKIP_TOKEN_CONCAT_ITERATIVE</span></div>
<div class="line"><span class="keywordtype">double</span> has_concat_of_floats_iterative = CONCAT2(CONCAT2(CONCAT2(1, E), +), 3);</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="comment">/* These ones are tricky. The terms inside the STRINGIFY should lead to</span></div>
<div class="line"><span class="comment">   valid preprocessing tokens but which are invalid tokens for the</span></div>
<div class="line"><span class="comment">   following phases. */</span></div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_concat_of_floats_1Ep3Em[] = STRINGIFY(CONCAT2(CONCAT2(1E+, 3E-), 3));</div>
<div class="line"><span class="preprocessor"># ifndef SKIP_TOKEN_HASH_HASH_AS_ARGUMENT</span></div>
<div class="line"><span class="preprocessor">#define DONT_CONCAT_(X) A X B</span></div>
<div class="line"><span class="preprocessor">#define DONT_CONCAT(X) DONT_CONCAT_(X)</span></div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_hash_hash_as_argument[] = STRINGIFY(DONT_CONCAT(##));</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># ifndef SKIP_TOKEN_CONCAT_HASH_HASH</span></div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_concat_of_hash_hash[] = STRINGIFY(CONCAT2(#, #));</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># ifndef SKIP_STRINGIFY_EMPTY</span></div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_stringify_empty[] = STRINGIFY();</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_EXPANDS</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* expand arguments after assigment, but before call */</span></div>
<div class="line"><span class="preprocessor"># define COMMA ,</span></div>
<div class="line"><span class="preprocessor"># define GLUE1(X) GLUE2(X)</span></div>
<div class="line"><span class="preprocessor"># define CONCAT3(A, B, C) GLUE2(A, B C)</span></div>
<div class="line"><span class="preprocessor"># define GLUE3(A, B, C) A ## B ## C</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_determines_macro_arguments_first[GLUE1(0 COMMA 1)];</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Expand args before ## concatenation? The rules for this are</span></div>
<div class="line"><span class="comment">   subtle. */</span></div>
<div class="line"><span class="preprocessor"># define EATEAT 0</span></div>
<div class="line"><span class="preprocessor"># define EAT 1</span></div>
<div class="line"><span class="keyword">enum</span> { CONCAT2(eat, GLUE2(EAT, EAT)) = GLUE2(EAT, EAT),</div>
<div class="line">       CONCAT2(eat, CONCAT2(EAT, EAT)) = CONCAT2(EAT, EAT),</div>
<div class="line">       <span class="comment">/* Only replace the empty argument by a placeholder if it is</span></div>
<div class="line"><span class="comment">          preceded or followed by a ## in the replacement text. */</span></div>
<div class="line">       eat2 = CONCAT3(EAT,,EAT),</div>
<div class="line">       eat3 = GLUE3(EAT,,EAT),</div>
<div class="line">};</div>
<div class="line"><span class="keywordtype">unsigned</span> has_preprocessor_expands_before_concatenation1[(eat0 == 0)*2 - 1] = { eat0 };</div>
<div class="line"><span class="keywordtype">unsigned</span> has_preprocessor_expands_before_concatenation2[(eat11 == 11)*2 - 1] = { eat0 };</div>
<div class="line"><span class="keywordtype">unsigned</span> has_preprocessor_no_placeholder_on_recursion[(eat2 == 11)*2 - 1] = { eat0 };</div>
<div class="line"><span class="keywordtype">unsigned</span> has_preprocessor_placeholder[(eat3 == 0)*2 - 1] = { eat0 };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_TRAILING_COMMA</span></div>
<div class="line"><span class="keyword">enum</span> { enumConstant, } has_enum_trailing_commas;</div>
<div class="line"><span class="keywordtype">unsigned</span> has_initializer_trailing_commas[] = { 0, };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_FLEXIBLE</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">  <span class="keywordtype">unsigned</span> len;</div>
<div class="line">  <span class="keywordtype">double</span> arr[];</div>
<div class="line">} flexible;</div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">union </span>{</div>
<div class="line">  flexible flex;</div>
<div class="line">  <span class="keywordtype">char</span> buffer[<span class="keyword">sizeof</span>(flexible) + 10*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)];</div>
<div class="line">} flex10;</div>
<div class="line">flex10 has_flexible_array = { .flex.len = 10 };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_RESTRICT</span></div>
<div class="line"><span class="keywordtype">char</span> restrict_buffer[25];</div>
<div class="line"><span class="keywordtype">char</span> *restrict has_restrict_keyword = restrict_buffer;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_STATIC_PARAMETER</span></div>
<div class="line"><span class="keywordtype">void</span> has_static_parameter(<span class="keywordtype">double</span> A[<span class="keyword">static</span> 10]){</div>
<div class="line"> <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_CONST_PARAMETER</span></div>
<div class="line"><span class="keywordtype">void</span> has_const_parameter(<span class="keywordtype">double</span> A[<span class="keyword">const</span> 10]){</div>
<div class="line"> <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_VOLATILE_PARAMETER</span></div>
<div class="line"><span class="keywordtype">void</span> has_volatile_parameter(<span class="keywordtype">double</span> A[<span class="keyword">volatile</span> 10]){</div>
<div class="line"> <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_RESTRICT_PARAMETER</span></div>
<div class="line"><span class="preprocessor"># ifndef SKIP_RESTRICT</span></div>
<div class="line"><span class="keywordtype">void</span> has_restrict_parameter(<span class="keywordtype">double</span> A[restrict 10]){</div>
<div class="line"> <span class="comment">/* empty */</span></div>
<div class="line">}</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_COMMENTS</span></div>
<div class="line"><span class="keyword">enum</span> { hasCppComment = -2</div>
<div class="line">       + 3</div>
<div class="line">       <span class="comment">//* for C99 all of this is a comment to the end of the line */ 3</span></div>
<div class="line">       <span class="comment">/* for C89 this resolves in division by 3 */</span></div>
<div class="line">};</div>
<div class="line"><span class="keywordtype">unsigned</span> has_cpp_comment[hasCppComment];</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_MIXED</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_mixed_declaration(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">/* infinite recursion, but who cares */</span></div>
<div class="line">  has_mixed_declaration();</div>
<div class="line">  <span class="keywordtype">unsigned</span> a = 10;</div>
<div class="line">  <span class="keywordflow">return</span> a;</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_FOR_DECLARATION</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_for_declaration(<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordtype">unsigned</span> a = 10;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a> = 0; <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a> &lt; a; ++<a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>) {</div>
<div class="line">    a -= <a class="code" href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">switch</span> (0)</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> var; 0;)</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">switch</span>((var = 0), 0)</div>
<div class="line">      <span class="keywordflow">default</span>: {</div>
<div class="line">        <span class="keywordflow">return</span> var;</div>
<div class="line">      }</div>
<div class="line">  <span class="keywordflow">return</span> a;</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_IDEM</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> <span class="keyword">const</span> has_idempotent_const = 1;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">volatile</span> <span class="keyword">volatile</span> has_idempotent_volatile = 1;</div>
<div class="line"><span class="preprocessor"># ifndef SKIP_RESTRICT</span></div>
<div class="line"><span class="keywordtype">unsigned</span> *restrict restrict has_idempotent_restrict = 0;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_PRAGMA</span></div>
<div class="line"><span class="preprocessor"># pragma STDC FP_CONTRACT ON</span></div>
<div class="line"><span class="preprocessor"># define PRAGMA(MESS) _Pragma(# MESS)</span></div>
<div class="line">PRAGMA(STDC FP_CONTRACT OFF)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_FUNC</span></div>
<div class="line"><span class="keywordtype">void</span> has_func_macro(<span class="keywordtype">char</span> <span class="keyword">const</span>* where[]) {</div>
<div class="line">  *where = __func__;</div>
<div class="line"> }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_LONG_LONG</span></div>
<div class="line"><span class="keywordtype">long</span> <span class="keywordtype">long</span> has_long_long = 0;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> has_ullong_max[-1 + 2*((0ULL - 1) &gt;= 18446744073709551615ULL)];</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_LONG_DOUBLE</span></div>
<div class="line"><span class="keywordtype">long</span> <span class="keywordtype">double</span> has_long_double = 1.0L;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_PREPRO_ARITH</span></div>
<div class="line"><span class="preprocessor"># if (0 - 1) &gt;= 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;this should be a negative value&quot;</span></div>
<div class="line"><span class="preprocessor"># else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_preprocessor_minus = 1;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="comment">/* Unsigned arithmetic should be done in the type that corresponds to</span></div>
<div class="line"><span class="comment">   uintmax_t and it should use modulo arithmetic. */</span></div>
<div class="line"><span class="preprocessor"># if ~0U &lt; 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;this should be a large positive value&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># if ~0U != (0U - 1)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;the preprocessor should do modulo arithmetic on unsigned values&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_preprocessor_bitneg = 1;</div>
<div class="line"><span class="preprocessor"># if (~0U &lt; 65535)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;this should be a large positive value, at least UINT_MAX &gt;= 2^{16} - 1&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># if (~0U &lt; 4294967295)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;this should be a large positive value, at least ULONG_MAX &gt;= 2^{32} - 1&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># if (~0U &lt; 18446744073709551615ULL)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;this should be a large positive value, at least ULLONG_MAX &gt;= 2^{64} - 1&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="keywordtype">unsigned</span> has_preprocessor_uintmax;</div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : 0U) &lt; 0</span></div>
<div class="line"><span class="preprocessor">#  warning &quot;ternary operator should promote to unsigned value&quot;</span></div>
<div class="line"><span class="preprocessor"># else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_preprocessor_ternary_unsigned = 1;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : 0) &gt; 0</span></div>
<div class="line"><span class="preprocessor">#  warning &quot;ternary operator should result in signed value&quot;</span></div>
<div class="line"><span class="preprocessor"># else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_preprocessor_ternary_signed = 1;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="comment">/* Bool operation should return a signed integer */</span></div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : (0 &amp;&amp; 0)) &gt; 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;logical operations should return signed values&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : (0U &amp;&amp; 0)) &gt; 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;logical operations should return signed values&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : (0 &amp;&amp; 0U)) &gt; 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;logical operations should return signed values&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"># if (1 ? -1 : (0U &amp;&amp; 0U)) &gt; 0</span></div>
<div class="line"><span class="preprocessor">#  error &quot;logical operations should return signed values&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_preprocessor_logical_signed = 1;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* A comma operator shall not appear in a constant expression, unless</span></div>
<div class="line"><span class="comment">   it is not evaluated. First test for the good case: it isn&#39;t</span></div>
<div class="line"><span class="comment">   evaluated. First this should be accepted by the compiler but also</span></div>
<div class="line"><span class="comment">   it should do the correct type promotions. This test can have</span></div>
<div class="line"><span class="comment">   different results when we try this for constant expressions in the</span></div>
<div class="line"><span class="comment">   compiler phase or in the preprocessor phase. */</span></div>
<div class="line"><span class="preprocessor">#define GOOD ((1 ? -1 : (0, 0u)) &lt; 0 )</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_NON_EVALUATED_COMMA_ASSIGN</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_non_evaluated_comma_expression_assign[2*!GOOD - 1] = { 0 };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_NON_EVALUATED_COMMA_PREPRO</span></div>
<div class="line"><span class="preprocessor"># if GOOD</span></div>
<div class="line"><span class="preprocessor">#  warning &quot;non evaluated comma expression yields wrong result&quot;</span></div>
<div class="line"><span class="preprocessor"># else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_non_evaluated_comma_expression_prepro = GOOD;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Now if it is in the evaluated part, this is undefined</span></div>
<div class="line"><span class="comment">   behavior. This could lead to anything, but also to the nice</span></div>
<div class="line"><span class="comment">   behavior that the compiler tells us. Some compilers do tell us in</span></div>
<div class="line"><span class="comment">   fact, but only as a warning. Some just refuse to compile. */</span></div>
<div class="line"><span class="preprocessor">#define BAD ((0 ? -1 : (0, 0u)) &gt; -1 )</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_EVALUATED_COMMA_ASSIGN</span></div>
<div class="line"><span class="keyword">enum</span> { bad = BAD };</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_evaluated_comma_expression_assign = 1;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#ifndef SKIP_EVALUATED_COMMA_PREPRO</span></div>
<div class="line"><span class="preprocessor"># if BAD</span></div>
<div class="line"><span class="preprocessor">#  warning &quot;evaluated comma expression yields wrong result&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keyword">const</span> has_evaluated_comma_expression_prepro = 1;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_UNIVERSAL</span></div>
<div class="line"><span class="keywordtype">int</span> has_hex_character = L<span class="stringliteral">&#39;\x0401&#39;</span>;</div>
<div class="line"><span class="keywordtype">int</span> has_universal_character_4 = L<span class="stringliteral">&#39;\u2118&#39;</span>;</div>
<div class="line"><span class="keywordtype">int</span> has_universal_character_8 = L<span class="stringliteral">&#39;\U00000401&#39;</span>;</div>
<div class="line"><span class="keywordtype">int</span> <span class="keyword">const</span>* has_universal_string_4 = L<span class="stringliteral">&quot;\u2018\u03A7\u2060X\u2019&quot;</span>;</div>
<div class="line"><span class="keywordtype">int</span> <span class="keyword">const</span>* has_universal_string_8 = L<span class="stringliteral">&quot;\U00002018\U000003A7\U00002060X\U00002019&quot;</span>;</div>
<div class="line"><span class="keywordtype">int</span> has_\u03BA\u03B1\u03B8\u03BF\u03BB\u03B9\u03BA\u03CC\u03C2_\u03c7\u03B1\u03C1\u03B1\u03BA\u03C4\u03AE\u03C1 = 1;</div>
<div class="line"><span class="keyword">const</span> int \u03BA = 0;</div>
<div class="line"><span class="keywordtype">int</span> <span class="keyword">const</span>*<span class="keyword">const</span> has_keeps_token_boundary_for_universal = &amp;\u03BA;</div>
<div class="line"><span class="preprocessor"># ifndef SKIP_UNIVERSAL_MANGLE</span></div>
<div class="line"><span class="comment">/* When compiled, the two static variables that are defined here must</span></div>
<div class="line"><span class="comment">   result in two different symbols. There is no way to check this at</span></div>
<div class="line"><span class="comment">   compile time, unfortunately. So we have to check the object file</span></div>
<div class="line"><span class="comment">   by hand to determine this. */</span></div>
<div class="line"><span class="keywordtype">int</span> has_universal_good_mangle(<span class="keywordtype">int</span> a) {</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">int</span> volatile \u03ba;</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">int</span> <span class="keyword">volatile</span> _u03ba;</div>
<div class="line">  \u03ba = !!a;</div>
<div class="line">  _u03ba = !a;</div>
<div class="line">  return \u03ba == _u03ba;</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor"># else</span></div>
<div class="line"><span class="keywordtype">int</span> has_universal_bad_mangle;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor"># ifndef SKIP_UNIVERSAL_UTF8</span></div>
<div class="line"><span class="keywordtype">double</span> <span class="keyword">const</span> π = 3.14159265;</div>
<div class="line"><span class="keywordtype">double</span> <span class="keyword">const</span>* has_utf8 = &amp;π;</div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Have checks for digraphs and trigraphs at the end, since they may</span></div>
<div class="line"><span class="comment">   mix up the pretty printing. */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_DIGRAPH</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* check for the four &quot;language&quot; digraphs */</span></div>
<div class="line"><span class="keywordtype">double</span> has_punctuation_digraph &lt;::&gt; = &lt;% 0 %&gt;;</div>
<div class="line"> </div>
<div class="line">%: define HAS_HASH_DIGRAPH 1</div>
<div class="line"><span class="keyword">enum</span> { hasHashDigraph = !!HAS_HASH_DIGRAPH };</div>
<div class="line">%: define DIGRAPH_STRINGIFY(X) %:X</div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_digraph_stringify[] = DIGRAPH_STRINGIFY(digraph);</div>
<div class="line"><span class="preprocessor"># if !defined(HAS_HASH_DIGRAPH)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;The preprocessor lacks digraph %: support. Run test with -DSKIP_DIGRAPH to be able to see the other tests.&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"> </div>
<div class="line">%: define HAS_HASH_HASH_DIGRAPH_(a, b) a %:%: b</div>
<div class="line">%: define HAS_HASH_HASH_DIGRAPH HAS_HASH_HASH_DIGRAPH_(0, 1)</div>
<div class="line">enum { hasHashHashDigraph = !!HAS_HASH_HASH_DIGRAPH};</div>
<div class="line"><span class="comment">/* This one here and the one in the trigraph section should be merged</span></div>
<div class="line"><span class="comment">   into one symbol. */</span></div>
<div class="line"><span class="keywordtype">double</span> has_hash_hash_interpretedCorrectly[hasHashHashDigraph];</div>
<div class="line"><span class="preprocessor"># if !defined(HAS_HASH_HASH_DIGRAPH) || (HAS_HASH_HASH_DIGRAPH != 1)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;The preprocessor lacks quadgraph %:%: support. Run test with -DSKIP_DIGRAPH to be able to see the other tests.&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SKIP_TRIGRAPH</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Check for the eight &quot;language&quot; trigraphs. If this works and you</span></div>
<div class="line"><span class="comment">   run this through your preprocessor phase (usually with -E) this</span></div>
<div class="line"><span class="comment">   should, all of a sudden look like valid C code. */</span></div>
<div class="line"><span class="keywordtype">int</span> has_punctuation_trigraph ??(??) = ??&lt; (0 ??<span class="stringliteral">&#39; 1), (0 ??! 1), ??-0,  &#39;</span>??/0<span class="stringliteral">&#39; ??&gt;;</span></div>
<div class="line"><span class="stringliteral">/* don&#39;</span>t get confused by the syntax highlighting the ??<span class="stringliteral">&#39; aint&#39;</span>t too bad <span class="keywordflow">for</span> that */</div>
<div class="line"> </div>
<div class="line">??= define HAS_HASH_TRIGRAPH 1</div>
<div class="line"><span class="keyword">enum</span> { hasHashTrigraph = !!HAS_HASH_TRIGRAPH };</div>
<div class="line">??= define TRIGRAPH_STRINGIFY(X) ??=X</div>
<div class="line"><span class="keywordtype">char</span> <span class="keyword">const</span> has_trigraph_stringfy[] = TRIGRAPH_STRINGIFY(trigraph);</div>
<div class="line"><span class="preprocessor"># if !defined(HAS_HASH_TRIGRAPH)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;The preprocessor lacks trigraph ??= support. Run test with -DSKIP_TRIGRAPH to be able to see the other tests.&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"> </div>
<div class="line">??= define HAS_HASH_HASH_TRIGRAPH_(a, b) a ??=??= b</div>
<div class="line">??= define HAS_HASH_HASH_TRIGRAPH HAS_HASH_HASH_TRIGRAPH_(0, 1)</div>
<div class="line">enum { hasHashHashTrigraph = !!HAS_HASH_HASH_TRIGRAPH};</div>
<div class="line"><span class="comment">/* This one here and the one in the digraph section should be merged</span></div>
<div class="line"><span class="comment">   into one symbol. */</span></div>
<div class="line"><span class="keywordtype">double</span> has_hash_hash_interpretedCorrectly[hasHashHashTrigraph];</div>
<div class="line"><span class="preprocessor"># if !defined(HAS_HASH_HASH_TRIGRAPH) || (HAS_HASH_HASH_TRIGRAPH != 1)</span></div>
<div class="line"><span class="preprocessor">#  error &quot;The preprocessor lacks hexgraph ??=??= support. Run test with -DSKIP_TRIGRAPH to be able to see the other tests.&quot;</span></div>
<div class="line"><span class="preprocessor"># endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="ap99__bitset_8h_a397f25d90863f345d65d0cd64bc2c733_html_a397f25d90863f345d65d0cd64bc2c733"><div class="ttname"><a href="p99__bitset_8h_a397f25d90863f345d65d0cd64bc2c733.html#a397f25d90863f345d65d0cd64bc2c733">void</a></div><div class="ttdeci">void void</div><div class="ttdef"><b>Definition:</b> <a href="p99__bitset_8h_source.html#l00076">p99_bitset.h:76</a></div></div>
<div class="ttc" id="ap99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda_html_a57a586489a0c58f01ad0e9d31e7c2eda"><div class="ttname"><a href="p99__getopt_8h_a57a586489a0c58f01ad0e9d31e7c2eda.html#a57a586489a0c58f01ad0e9d31e7c2eda">i</a></div><div class="ttdeci">P00_CLAUSE2 i(_Pragma(&quot;weak  p00_getopt_comp&quot;))(_Pragma(&quot;weak p00_getopt_comp </div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
